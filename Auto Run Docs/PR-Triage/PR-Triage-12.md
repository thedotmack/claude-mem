# Phase 12: Feature PRs — Evaluation & Decision

These are feature PRs that need product/architectural decisions. Each should be evaluated against the project roadmap and YAGNI principles.

## Provider Integrations

Multiple community members want to add provider support. Evaluate whether the project should support more providers or focus on stability.

- [x] Evaluate PR #808 (`feat: Add AnthropicAPIAgent for direct API observation processing` by @MrSaneApps, 4 files). **CLOSED.** Memory concerns (the core motivation) were already addressed by merged PR #806. Having two Anthropic providers (SDK + direct API) creates user confusion and maintenance burden. Claude SDK via CLI auth remains the recommended path. Closed with detailed explanation thanking the contributor.

- [x] Evaluate PR #786 (`feat: add GLM provider and custom Anthropic-compatible API support` by @Zorglub4242, 13 files). **CLOSED.** Three issues: (1) `process.env` mutation is a concurrency bug — env vars leak between sessions since the worker handles multiple sessions on one process. (2) GLM preset is YAGNI — a generic custom provider option would cover GLM users without a dedicated preset. (3) Custom Anthropic-compatible API support is a good concept but needs subprocess-scoped env vars, not global mutation. Invited contributor to re-submit a focused custom-provider-only PR.

- [x] Evaluate PR #644 (`feat: Add OpenAI provider support` by @niteeshm, 10 files). **CLOSED.** OpenAI models are already accessible via the OpenRouter provider, which uses the same OpenAI-compatible chat/completions API format. Adding a dedicated OpenAI agent (491 lines) would create significant code duplication with OpenRouterAgent. A community commenter (@kiwina) independently flagged the same overlap. Suggested contributor could instead PR a configurable base URL for OpenRouter to support Azure/custom endpoints.

- [x] Evaluate PR #680 (`feat(openrouter): multi-model configuration with automatic fallback` by @RyderFreeman4Logos, 28 files). **CLOSED.** Three issues: (1) Bundles 5+ distinct features (multi-model fallback, provider fallback chain, configurable base URL, settings hot-reload, Gemini 3 default) into one PR — each should be separate. (2) Deletes content from 12+ CLAUDE.md documentation files (~1,200 lines of project docs removed), which is destructive and unrelated to the feature. (3) Multi-model fallback is YAGNI — most users configure a single model. Invited contributor to re-submit a focused configurable-base-URL-only PR.

- [x] Evaluate PR #746 (`feat: add OpenCode platform support` by @MattMagg, 12 files). **CLOSED — resubmit requested.** Platform-agnostic support IS a goal (the adapter architecture was designed for it), and the core adapter code (26 lines) is clean and follows the Cursor adapter pattern. However, the PR includes build artifacts (worker-service.cjs, mcp-server.cjs), planning scratch docs committed to root, a settings.json whitespace change, and an `.opencode/` plugin directory with maintenance implications. Requested a focused re-submission with just the adapter source, router change, README update, and docs.

- [x] Evaluate PR #860 (`feat: add Clawdbot/moltbot environment detection and compatibility mode` by @janitooor, 3 files). **CLOSED.** Three issues: (1) YAGNI — no evidence of user demand for Clawdbot compatibility, and the PR was a bot-generated "autonomous contribution by Legba." (2) Dead code — the detection utilities are standalone and never integrated into any hook, service, or handler. (3) Documentation references non-existent API endpoints and settings. If real conflicts surface from user reports, a focused, integrated fix would be welcome.

## Memory Features

- [x] Evaluate PR #662 (`feat(mcp): add save_memory tool for manual memory storage` by @darconada, 8 files). **MERGED (cherry-picked to main).** Manual memory storage aligns with the project philosophy — automatic capture handles 80% of cases, manual save handles the 20% where users want explicit control (Issue #645). Source changes applied directly (PR had merge conflicts in compiled .cjs build artifacts only). Implementation is clean: MCP tool definition, POST /api/memory/save endpoint via MemoryRoutes.ts, getOrCreateManualSession() in SessionStore, README updates. Minor fix: changed logger component from unregistered 'MEMORY' to 'HTTP'/'CHROMA'. Closes #645.

- [x] Evaluate PR #920 (`feat: add project exclusion setting` by @Spunky84, 7 files) and PR #699 (`feat: add folder exclude setting for CLAUDE.md generation` by @leepokai, 2 files). **BOTH MERGED (cherry-picked to main).** These solve complementary problems, not the same problem: (1) PR #920 adds `CLAUDE_MEM_EXCLUDED_PROJECTS` — glob patterns to exclude entire projects from ALL tracking (privacy/confidentiality). Well-tested (11 unit tests), clean glob-to-regex implementation, early-exit in session-init and observation handlers. Minor cleanup: removed unused SessionRoutes import and unexported internal helper. (2) PR #699 adds `CLAUDE_MEM_FOLDER_MD_EXCLUDE` — JSON array of paths to exclude from CLAUDE.md file generation (build tool compatibility). Solves confirmed issues: SwiftUI/Xcode build conflicts, drizzle kit migration failures (3 separate commenters). Closes #620. Both had merge conflicts with current main, so changes were applied directly rather than git-merged.

## Architectural Changes

- [x] Evaluate PR #660 (`feat: add network mode for multi-agent deployments` by @nycterent, 42 files). **CLOSED.** Three issues: (1) Deletes ~1,100 lines of CLAUDE.md documentation across 19 files, replacing content with `*No recent activity*` — same destructive pattern as PR #680. (2) Bundles 4+ distinct features: network mode, OpenCode integration (already closed in PR #746), Basic Memory import script, remote MCP wrapper. (3) The actual network mode feature (WORKER_BIND/WORKER_HOST separation) is only ~50 lines and is a solid concept. Invited contributor to re-submit a focused network-mode-only PR without documentation deletions or bundled features.

- [x] Evaluate PR #968 (`Migrate from SQLite to memU hierarchical memory backend` by @minhlucvan, 55 files). **ALREADY CLOSED (by author).** PR was closed by @minhlucvan on Feb 5, 2026. Greptile's automated review gave it a 0/5 confidence score — the PR deleted all SQLite files but didn't update the 30+ files that import them, meaning the application would fail immediately at runtime. The PR description claimed features (IStorageBackend interface, BackendFactory, SqliteAdapter) that didn't exist in the actual code. Additionally, replacing SQLite with an external dependency violates the project's zero-dependency, portable architecture. No action needed — author self-closed.

- [x] Evaluate PR #854 (`feat: Pro cloud sync integration with Supabase + Pinecone` by @bigph00t, 35 files). **CLOSED — premature, hold for later.** @bigph00t is a trusted contributor (4 merged PRs including #806 zombie process fix and #813 path format fix), and the architecture is well-considered (SyncProvider abstraction, CloudSync with SQLite fallback, secure ProConfig with 0600 permissions). However, five issues prevent merging now: (1) The Pro API backend (`claude-mem-pro.vercel.app`) returns 404 — merging client code before the server exists would leave users with a broken `/pro-setup` flow. (2) Bundles already-merged changes — `ProcessRegistry.ts` (from PR #806) and `path-utils.ts` (from PR #813) already exist on main, creating conflicts. (3) Includes built artifacts (`worker-service.cjs`, `mcp-server.cjs`, `viewer-bundle.js`). (4) CLAUDE.md states Pro integration points should be "minimal: settings for license keys, tunnel provisioning logic" — this PR adds 3,907 lines including dual storage paths in `ResponseProcessor.ts`, which is a substantial core architecture change. (5) Version bumps (9.0.6→9.0.10) and CHANGELOG entries don't match current release history. Invited contributor to resubmit a clean PR rebased on main when the Pro backend is live.

## Owner's PRs

- [x] Review PR #863 (`feat: implement ragtime email investigation with self-iteration and cleanup` by @thedotmack, 2 files). **MERGED.** Owner's PR. Transforms ragtime from a placeholder stub into a functional email investigation batch processor. Key improvements: replaces hardcoded absolute paths with configurable environment variables (CONFIG object with 7 settings), adds `cleanupOldTranscripts()` to prevent transcript buildup, proper `main()` function with error handling, `getFilesToProcess()` with directory validation and file limit, structured `processFile()` with message parsing, removes debugging cruft. README updated from "not yet implemented" to comprehensive usage documentation with configuration table. Greptile review: 4/5 confidence, safe to merge. Both automated reviews passed.

- [x] Review PR #657 (`feat: add generate/clean CLI commands with cross-platform support` by @thedotmack, 100 files). **MERGED (cherry-picked to main).** Owner's PR, 224 commits behind main. Cherry-picked 3 source changes: (1) New `src/cli/claude-md-commands.ts` with `generateClaudeMd()` and `cleanClaudeMd()` — uses shared `isDirectChild` from `path-utils.ts` (DRY improvement over PR original). (2) Worker service `generate`/`clean` case handlers with `--dry-run` support. (3) `CLAUDE_MD` logger component type. Skipped: 91 stale CLAUDE.md deletions, `.claude/plans/` dev artifact, `smart-install.js` auto-injection of shell aliases (modifies `~/.zshrc` without consent), and `claude-md-utils.ts`/`SettingsDefaultsManager.ts` changes that would have reverted safety guards and exclusion settings merged in later PRs. Tests: 857 pass, 3 skip, 1 pre-existing flaky timeout.
