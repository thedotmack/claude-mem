#!/usr/bin/env node
"use strict";var ki=Object.create;var va=Object.defineProperty;var Ni=Object.getOwnPropertyDescriptor;var Li=Object.getOwnPropertyNames;var Mi=Object.getPrototypeOf,ji=Object.prototype.hasOwnProperty;var W=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Fi=(a,e)=>{for(var t in e)va(a,t,{get:e[t],enumerable:!0})},Ui=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Li(e))!ji.call(a,r)&&r!==t&&va(a,r,{get:()=>e[r],enumerable:!(s=Ni(e,r))||s.enumerable});return a};var ga=(a,e,t)=>(t=a!=null?ki(Mi(a)):{},Ui(e||!a||!a.__esModule?va(t,"default",{value:a,enumerable:!0}):t,a));var an=W((Vt,tn)=>{(function(a,e){typeof Vt=="object"&&typeof tn<"u"?e(Vt):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Vt,(function(a){"use strict";function e(){for(var p=arguments.length,u=Array(p),g=0;g<p;g++)u[g]=arguments[g];if(u.length>1){u[0]=u[0].slice(0,-1);for(var S=u.length-1,P=1;P<S;++P)u[P]=u[P].slice(1,-1);return u[S]=u[S].slice(1),u.join("")}else return u[0]}function t(p){return"(?:"+p+")"}function s(p){return p===void 0?"undefined":p===null?"null":Object.prototype.toString.call(p).split(" ").pop().split("]").shift().toLowerCase()}function r(p){return p.toUpperCase()}function n(p){return p!=null?p instanceof Array?p:typeof p.length!="number"||p.split||p.setInterval||p.call?[p]:Array.prototype.slice.call(p):[]}function l(p,u){var g=p;if(u)for(var S in u)g[S]=u[S];return g}function o(p){var u="[A-Za-z]",g="[\\x0D]",S="[0-9]",P="[\\x22]",N=e(S,"[A-Fa-f]"),Z="[\\x0A]",re="[\\x20]",ne=t(t("%[EFef]"+N+"%"+N+N+"%"+N+N)+"|"+t("%[89A-Fa-f]"+N+"%"+N+N)+"|"+t("%"+N+N)),ye="[\\:\\/\\?\\#\\[\\]\\@]",ee="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ue=e(ye,ee),_e=p?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ce=p?"[\\uE000-\\uF8FF]":"[]",ae=e(u,S,"[\\-\\.\\_\\~]",_e),de=t(u+e(u,S,"[\\+\\-\\.]")+"*"),ie=t(t(ne+"|"+e(ae,ee,"[\\:]"))+"*"),br=t(t("25[0-5]")+"|"+t("2[0-4]"+S)+"|"+t("1"+S+S)+"|"+t("[1-9]"+S)+"|"+S),ke=t(t("25[0-5]")+"|"+t("2[0-4]"+S)+"|"+t("1"+S+S)+"|"+t("0?[1-9]"+S)+"|0?0?"+S),Me=t(ke+"\\."+ke+"\\."+ke+"\\."+ke),le=t(N+"{1,4}"),Ne=t(t(le+"\\:"+le)+"|"+Me),je=t(t(le+"\\:")+"{6}"+Ne),Je=t("\\:\\:"+t(le+"\\:")+"{5}"+Ne),xr=t(t(le)+"?\\:\\:"+t(le+"\\:")+"{4}"+Ne),sr=t(t(t(le+"\\:")+"{0,1}"+le)+"?\\:\\:"+t(le+"\\:")+"{3}"+Ne),ct=t(t(t(le+"\\:")+"{0,2}"+le)+"?\\:\\:"+t(le+"\\:")+"{2}"+Ne),xt=t(t(t(le+"\\:")+"{0,3}"+le)+"?\\:\\:"+le+"\\:"+Ne),Rt=t(t(t(le+"\\:")+"{0,4}"+le)+"?\\:\\:"+Ne),Br=t(t(t(le+"\\:")+"{0,5}"+le)+"?\\:\\:"+le),Wr=t(t(t(le+"\\:")+"{0,6}"+le)+"?\\:\\:"),nr=t([je,Je,xr,sr,ct,xt,Rt,Br,Wr].join("|")),Qr=t(t(ae+"|"+ne)+"+"),pa=t(nr+"\\%25"+Qr),Rr=t(nr+t("\\%25|\\%(?!"+N+"{2})")+Qr),Ti=t("[vV]"+N+"+\\."+e(ae,ee,"[\\:]")+"+"),Oi=t("\\["+t(Rr+"|"+nr+"|"+Ti)+"\\]"),ys=t(t(ne+"|"+e(ae,ee))+"*"),ut=t(Oi+"|"+Me+"(?!"+ys+")|"+ys),dt=t(S+"*"),_s=t(t(ie+"@")+"?"+ut+t("\\:"+dt)+"?"),ft=t(ne+"|"+e(ae,ee,"[\\:\\@]")),Ii=t(ft+"*"),Es=t(ft+"+"),Ai=t(t(ne+"|"+e(ae,ee,"[\\@]"))+"+"),or=t(t("\\/"+Ii)+"*"),Zr=t("\\/"+t(Es+or)+"?"),ma=t(Ai+or),wt=t(Es+or),Kr="(?!"+ft+")",Cd=t(or+"|"+Zr+"|"+ma+"|"+wt+"|"+Kr),Gr=t(t(ft+"|"+e("[\\/\\?]",ce))+"*"),ht=t(t(ft+"|[\\/\\?]")+"*"),Ss=t(t("\\/\\/"+_s+or)+"|"+Zr+"|"+wt+"|"+Kr),Ci=t(de+"\\:"+Ss+t("\\?"+Gr)+"?"+t("\\#"+ht)+"?"),$i=t(t("\\/\\/"+_s+or)+"|"+Zr+"|"+ma+"|"+Kr),Di=t($i+t("\\?"+Gr)+"?"+t("\\#"+ht)+"?"),$d=t(Ci+"|"+Di),Dd=t(de+"\\:"+Ss+t("\\?"+Gr)+"?"),kd="^("+de+")\\:"+t(t("\\/\\/("+t("("+ie+")@")+"?("+ut+")"+t("\\:("+dt+")")+"?)")+"?("+or+"|"+Zr+"|"+wt+"|"+Kr+")")+t("\\?("+Gr+")")+"?"+t("\\#("+ht+")")+"?$",Nd="^(){0}"+t(t("\\/\\/("+t("("+ie+")@")+"?("+ut+")"+t("\\:("+dt+")")+"?)")+"?("+or+"|"+Zr+"|"+ma+"|"+Kr+")")+t("\\?("+Gr+")")+"?"+t("\\#("+ht+")")+"?$",Ld="^("+de+")\\:"+t(t("\\/\\/("+t("("+ie+")@")+"?("+ut+")"+t("\\:("+dt+")")+"?)")+"?("+or+"|"+Zr+"|"+wt+"|"+Kr+")")+t("\\?("+Gr+")")+"?$",Md="^"+t("\\#("+ht+")")+"?$",jd="^"+t("("+ie+")@")+"?("+ut+")"+t("\\:("+dt+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",u,S,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",ae,ee),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",ae,ee),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",ae,ee),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",ae,ee),"g"),NOT_QUERY:new RegExp(e("[^\\%]",ae,ee,"[\\:\\@\\/\\?]",ce),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",ae,ee,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",ae,ee),"g"),UNRESERVED:new RegExp(ae,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",ae,ue),"g"),PCT_ENCODED:new RegExp(ne,"g"),IPV4ADDRESS:new RegExp("^("+Me+")$"),IPV6ADDRESS:new RegExp("^\\[?("+nr+")"+t(t("\\%25|\\%(?!"+N+"{2})")+"("+Qr+")")+"?\\]?$")}}var f=o(!1),d=o(!0),h=(function(){function p(u,g){var S=[],P=!0,N=!1,Z=void 0;try{for(var re=u[Symbol.iterator](),ne;!(P=(ne=re.next()).done)&&(S.push(ne.value),!(g&&S.length===g));P=!0);}catch(ye){N=!0,Z=ye}finally{try{!P&&re.return&&re.return()}finally{if(N)throw Z}}return S}return function(u,g){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return p(u,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),m=function(p){if(Array.isArray(p)){for(var u=0,g=Array(p.length);u<p.length;u++)g[u]=p[u];return g}else return Array.from(p)},E=2147483647,c=36,y=1,_=26,v=38,b=700,T=72,x=128,w="-",I=/^xn--/,A=/[^\0-\x7E]/,V=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=c-y,U=Math.floor,j=String.fromCharCode;function L(p){throw new RangeError(F[p])}function O(p,u){for(var g=[],S=p.length;S--;)g[S]=u(p[S]);return g}function $(p,u){var g=p.split("@"),S="";g.length>1&&(S=g[0]+"@",p=g[1]),p=p.replace(V,".");var P=p.split("."),N=O(P,u).join(".");return S+N}function M(p){for(var u=[],g=0,S=p.length;g<S;){var P=p.charCodeAt(g++);if(P>=55296&&P<=56319&&g<S){var N=p.charCodeAt(g++);(N&64512)==56320?u.push(((P&1023)<<10)+(N&1023)+65536):(u.push(P),g--)}else u.push(P)}return u}var oe=function(u){return String.fromCodePoint.apply(String,m(u))},J=function(u){return u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:c},X=function(u,g){return u+22+75*(u<26)-((g!=0)<<5)},G=function(u,g,S){var P=0;for(u=S?U(u/b):u>>1,u+=U(u/g);u>C*_>>1;P+=c)u=U(u/C);return U(P+(C+1)*u/(u+v))},H=function(u){var g=[],S=u.length,P=0,N=x,Z=T,re=u.lastIndexOf(w);re<0&&(re=0);for(var ne=0;ne<re;++ne)u.charCodeAt(ne)>=128&&L("not-basic"),g.push(u.charCodeAt(ne));for(var ye=re>0?re+1:0;ye<S;){for(var ee=P,ue=1,_e=c;;_e+=c){ye>=S&&L("invalid-input");var ce=J(u.charCodeAt(ye++));(ce>=c||ce>U((E-P)/ue))&&L("overflow"),P+=ce*ue;var ae=_e<=Z?y:_e>=Z+_?_:_e-Z;if(ce<ae)break;var de=c-ae;ue>U(E/de)&&L("overflow"),ue*=de}var ie=g.length+1;Z=G(P-ee,ie,ee==0),U(P/ie)>E-N&&L("overflow"),N+=U(P/ie),P%=ie,g.splice(P++,0,N)}return String.fromCodePoint.apply(String,g)},fe=function(u){var g=[];u=M(u);var S=u.length,P=x,N=0,Z=T,re=!0,ne=!1,ye=void 0;try{for(var ee=u[Symbol.iterator](),ue;!(re=(ue=ee.next()).done);re=!0){var _e=ue.value;_e<128&&g.push(j(_e))}}catch(Rr){ne=!0,ye=Rr}finally{try{!re&&ee.return&&ee.return()}finally{if(ne)throw ye}}var ce=g.length,ae=ce;for(ce&&g.push(w);ae<S;){var de=E,ie=!0,br=!1,ke=void 0;try{for(var Me=u[Symbol.iterator](),le;!(ie=(le=Me.next()).done);ie=!0){var Ne=le.value;Ne>=P&&Ne<de&&(de=Ne)}}catch(Rr){br=!0,ke=Rr}finally{try{!ie&&Me.return&&Me.return()}finally{if(br)throw ke}}var je=ae+1;de-P>U((E-N)/je)&&L("overflow"),N+=(de-P)*je,P=de;var Je=!0,xr=!1,sr=void 0;try{for(var ct=u[Symbol.iterator](),xt;!(Je=(xt=ct.next()).done);Je=!0){var Rt=xt.value;if(Rt<P&&++N>E&&L("overflow"),Rt==P){for(var Br=N,Wr=c;;Wr+=c){var nr=Wr<=Z?y:Wr>=Z+_?_:Wr-Z;if(Br<nr)break;var Qr=Br-nr,pa=c-nr;g.push(j(X(nr+Qr%pa,0))),Br=U(Qr/pa)}g.push(j(X(Br,0))),Z=G(N,je,ae==ce),N=0,++ae}}}catch(Rr){xr=!0,sr=Rr}finally{try{!Je&&ct.return&&ct.return()}finally{if(xr)throw sr}}++N,++P}return g.join("")},be=function(u){return $(u,function(g){return I.test(g)?H(g.slice(4).toLowerCase()):g})},we=function(u){return $(u,function(g){return A.test(g)?"xn--"+fe(g):g})},te={version:"2.1.0",ucs2:{decode:M,encode:oe},decode:H,encode:fe,toASCII:we,toUnicode:be},ve={};function Ee(p){var u=p.charCodeAt(0),g=void 0;return u<16?g="%0"+u.toString(16).toUpperCase():u<128?g="%"+u.toString(16).toUpperCase():u<2048?g="%"+(u>>6|192).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase():g="%"+(u>>12|224).toString(16).toUpperCase()+"%"+(u>>6&63|128).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase(),g}function Te(p){for(var u="",g=0,S=p.length;g<S;){var P=parseInt(p.substr(g+1,2),16);if(P<128)u+=String.fromCharCode(P),g+=3;else if(P>=194&&P<224){if(S-g>=6){var N=parseInt(p.substr(g+4,2),16);u+=String.fromCharCode((P&31)<<6|N&63)}else u+=p.substr(g,6);g+=6}else if(P>=224){if(S-g>=9){var Z=parseInt(p.substr(g+4,2),16),re=parseInt(p.substr(g+7,2),16);u+=String.fromCharCode((P&15)<<12|(Z&63)<<6|re&63)}else u+=p.substr(g,9);g+=9}else u+=p.substr(g,3),g+=3}return u}function dr(p,u){function g(S){var P=Te(S);return P.match(u.UNRESERVED)?P:S}return p.scheme&&(p.scheme=String(p.scheme).replace(u.PCT_ENCODED,g).toLowerCase().replace(u.NOT_SCHEME,"")),p.userinfo!==void 0&&(p.userinfo=String(p.userinfo).replace(u.PCT_ENCODED,g).replace(u.NOT_USERINFO,Ee).replace(u.PCT_ENCODED,r)),p.host!==void 0&&(p.host=String(p.host).replace(u.PCT_ENCODED,g).toLowerCase().replace(u.NOT_HOST,Ee).replace(u.PCT_ENCODED,r)),p.path!==void 0&&(p.path=String(p.path).replace(u.PCT_ENCODED,g).replace(p.scheme?u.NOT_PATH:u.NOT_PATH_NOSCHEME,Ee).replace(u.PCT_ENCODED,r)),p.query!==void 0&&(p.query=String(p.query).replace(u.PCT_ENCODED,g).replace(u.NOT_QUERY,Ee).replace(u.PCT_ENCODED,r)),p.fragment!==void 0&&(p.fragment=String(p.fragment).replace(u.PCT_ENCODED,g).replace(u.NOT_FRAGMENT,Ee).replace(u.PCT_ENCODED,r)),p}function tr(p){return p.replace(/^0*(.*)/,"$1")||"0"}function ge(p,u){var g=p.match(u.IPV4ADDRESS)||[],S=h(g,2),P=S[1];return P?P.split(".").map(tr).join("."):p}function he(p,u){var g=p.match(u.IPV6ADDRESS)||[],S=h(g,3),P=S[1],N=S[2];if(P){for(var Z=P.toLowerCase().split("::").reverse(),re=h(Z,2),ne=re[0],ye=re[1],ee=ye?ye.split(":").map(tr):[],ue=ne.split(":").map(tr),_e=u.IPV4ADDRESS.test(ue[ue.length-1]),ce=_e?7:8,ae=ue.length-ce,de=Array(ce),ie=0;ie<ce;++ie)de[ie]=ee[ie]||ue[ae+ie]||"";_e&&(de[ce-1]=ge(de[ce-1],u));var br=de.reduce(function(je,Je,xr){if(!Je||Je==="0"){var sr=je[je.length-1];sr&&sr.index+sr.length===xr?sr.length++:je.push({index:xr,length:1})}return je},[]),ke=br.sort(function(je,Je){return Je.length-je.length})[0],Me=void 0;if(ke&&ke.length>1){var le=de.slice(0,ke.index),Ne=de.slice(ke.index+ke.length);Me=le.join(":")+"::"+Ne.join(":")}else Me=de.join(":");return N&&(Me+="%"+N),Me}else return p}var Er=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,xe="".match(/(){0}/)[1]===void 0;function se(p){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g={},S=u.iri!==!1?d:f;u.reference==="suffix"&&(p=(u.scheme?u.scheme+":":"")+"//"+p);var P=p.match(Er);if(P){xe?(g.scheme=P[1],g.userinfo=P[3],g.host=P[4],g.port=parseInt(P[5],10),g.path=P[6]||"",g.query=P[7],g.fragment=P[8],isNaN(g.port)&&(g.port=P[5])):(g.scheme=P[1]||void 0,g.userinfo=p.indexOf("@")!==-1?P[3]:void 0,g.host=p.indexOf("//")!==-1?P[4]:void 0,g.port=parseInt(P[5],10),g.path=P[6]||"",g.query=p.indexOf("?")!==-1?P[7]:void 0,g.fragment=p.indexOf("#")!==-1?P[8]:void 0,isNaN(g.port)&&(g.port=p.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?P[4]:void 0)),g.host&&(g.host=he(ge(g.host,S),S)),g.scheme===void 0&&g.userinfo===void 0&&g.host===void 0&&g.port===void 0&&!g.path&&g.query===void 0?g.reference="same-document":g.scheme===void 0?g.reference="relative":g.fragment===void 0?g.reference="absolute":g.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==g.reference&&(g.error=g.error||"URI is not a "+u.reference+" reference.");var N=ve[(u.scheme||g.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!N||!N.unicodeSupport)){if(g.host&&(u.domainHost||N&&N.domainHost))try{g.host=te.toASCII(g.host.replace(S.PCT_ENCODED,Te).toLowerCase())}catch(Z){g.error=g.error||"Host's domain name can not be converted to ASCII via punycode: "+Z}dr(g,f)}else dr(g,S);N&&N.parse&&N.parse(g,u)}else g.error=g.error||"URI can not be parsed.";return g}function fr(p,u){var g=u.iri!==!1?d:f,S=[];return p.userinfo!==void 0&&(S.push(p.userinfo),S.push("@")),p.host!==void 0&&S.push(he(ge(String(p.host),g),g).replace(g.IPV6ADDRESS,function(P,N,Z){return"["+N+(Z?"%25"+Z:"")+"]"})),(typeof p.port=="number"||typeof p.port=="string")&&(S.push(":"),S.push(String(p.port))),S.length?S.join(""):void 0}var ar=/^\.\.?\//,Sr=/^\/\.(\/|$)/,Pr=/^\/\.\.(\/|$)/,Se=/^\/?(?:.|\n)*?(?=\/|$)/;function Le(p){for(var u=[];p.length;)if(p.match(ar))p=p.replace(ar,"");else if(p.match(Sr))p=p.replace(Sr,"/");else if(p.match(Pr))p=p.replace(Pr,"/"),u.pop();else if(p==="."||p==="..")p="";else{var g=p.match(Se);if(g){var S=g[0];p=p.slice(S.length),u.push(S)}else throw new Error("Unexpected dot segment condition")}return u.join("")}function Ie(p){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=u.iri?d:f,S=[],P=ve[(u.scheme||p.scheme||"").toLowerCase()];if(P&&P.serialize&&P.serialize(p,u),p.host&&!g.IPV6ADDRESS.test(p.host)){if(u.domainHost||P&&P.domainHost)try{p.host=u.iri?te.toUnicode(p.host):te.toASCII(p.host.replace(g.PCT_ENCODED,Te).toLowerCase())}catch(re){p.error=p.error||"Host's domain name can not be converted to "+(u.iri?"Unicode":"ASCII")+" via punycode: "+re}}dr(p,g),u.reference!=="suffix"&&p.scheme&&(S.push(p.scheme),S.push(":"));var N=fr(p,u);if(N!==void 0&&(u.reference!=="suffix"&&S.push("//"),S.push(N),p.path&&p.path.charAt(0)!=="/"&&S.push("/")),p.path!==void 0){var Z=p.path;!u.absolutePath&&(!P||!P.absolutePath)&&(Z=Le(Z)),N===void 0&&(Z=Z.replace(/^\/\//,"/%2F")),S.push(Z)}return p.query!==void 0&&(S.push("?"),S.push(p.query)),p.fragment!==void 0&&(S.push("#"),S.push(p.fragment)),S.join("")}function Oe(p,u){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=arguments[3],P={};return S||(p=se(Ie(p,g),g),u=se(Ie(u,g),g)),g=g||{},!g.tolerant&&u.scheme?(P.scheme=u.scheme,P.userinfo=u.userinfo,P.host=u.host,P.port=u.port,P.path=Le(u.path||""),P.query=u.query):(u.userinfo!==void 0||u.host!==void 0||u.port!==void 0?(P.userinfo=u.userinfo,P.host=u.host,P.port=u.port,P.path=Le(u.path||""),P.query=u.query):(u.path?(u.path.charAt(0)==="/"?P.path=Le(u.path):((p.userinfo!==void 0||p.host!==void 0||p.port!==void 0)&&!p.path?P.path="/"+u.path:p.path?P.path=p.path.slice(0,p.path.lastIndexOf("/")+1)+u.path:P.path=u.path,P.path=Le(P.path)),P.query=u.query):(P.path=p.path,u.query!==void 0?P.query=u.query:P.query=p.query),P.userinfo=p.userinfo,P.host=p.host,P.port=p.port),P.scheme=p.scheme),P.fragment=u.fragment,P}function Ke(p,u,g){var S=l({scheme:"null"},g);return Ie(Oe(se(p,S),se(u,S),S,!0),S)}function De(p,u){return typeof p=="string"?p=Ie(se(p,u),u):s(p)==="object"&&(p=se(Ie(p,u),u)),p}function bt(p,u,g){return typeof p=="string"?p=Ie(se(p,g),g):s(p)==="object"&&(p=Ie(p,g)),typeof u=="string"?u=Ie(se(u,g),g):s(u)==="object"&&(u=Ie(u,g)),p===u}function fa(p,u){return p&&p.toString().replace(!u||!u.iri?f.ESCAPE:d.ESCAPE,Ee)}function ze(p,u){return p&&p.toString().replace(!u||!u.iri?f.PCT_ENCODED:d.PCT_ENCODED,Te)}var it={scheme:"http",domainHost:!0,parse:function(u,g){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u},serialize:function(u,g){var S=String(u.scheme).toLowerCase()==="https";return(u.port===(S?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}},us={scheme:"https",domainHost:it.domainHost,parse:it.parse,serialize:it.serialize};function ds(p){return typeof p.secure=="boolean"?p.secure:String(p.scheme).toLowerCase()==="wss"}var lt={scheme:"ws",domainHost:!0,parse:function(u,g){var S=u;return S.secure=ds(S),S.resourceName=(S.path||"/")+(S.query?"?"+S.query:""),S.path=void 0,S.query=void 0,S},serialize:function(u,g){if((u.port===(ds(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){var S=u.resourceName.split("?"),P=h(S,2),N=P[0],Z=P[1];u.path=N&&N!=="/"?N:void 0,u.query=Z,u.resourceName=void 0}return u.fragment=void 0,u}},fs={scheme:"wss",domainHost:lt.domainHost,parse:lt.parse,serialize:lt.serialize},mi={},vi=!0,hs="[A-Za-z0-9\\-\\.\\_\\~"+(vi?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Ge="[0-9A-Fa-f]",gi=t(t("%[EFef]"+Ge+"%"+Ge+Ge+"%"+Ge+Ge)+"|"+t("%[89A-Fa-f]"+Ge+"%"+Ge+Ge)+"|"+t("%"+Ge+Ge)),yi="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",_i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ei=e(_i,'[\\"\\\\]'),Si="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Pi=new RegExp(hs,"g"),zr=new RegExp(gi,"g"),bi=new RegExp(e("[^]",yi,"[\\.]",'[\\"]',Ei),"g"),ps=new RegExp(e("[^]",hs,Si),"g"),xi=ps;function ha(p){var u=Te(p);return u.match(Pi)?u:p}var ms={scheme:"mailto",parse:function(u,g){var S=u,P=S.to=S.path?S.path.split(","):[];if(S.path=void 0,S.query){for(var N=!1,Z={},re=S.query.split("&"),ne=0,ye=re.length;ne<ye;++ne){var ee=re[ne].split("=");switch(ee[0]){case"to":for(var ue=ee[1].split(","),_e=0,ce=ue.length;_e<ce;++_e)P.push(ue[_e]);break;case"subject":S.subject=ze(ee[1],g);break;case"body":S.body=ze(ee[1],g);break;default:N=!0,Z[ze(ee[0],g)]=ze(ee[1],g);break}}N&&(S.headers=Z)}S.query=void 0;for(var ae=0,de=P.length;ae<de;++ae){var ie=P[ae].split("@");if(ie[0]=ze(ie[0]),g.unicodeSupport)ie[1]=ze(ie[1],g).toLowerCase();else try{ie[1]=te.toASCII(ze(ie[1],g).toLowerCase())}catch(br){S.error=S.error||"Email address's domain name can not be converted to ASCII via punycode: "+br}P[ae]=ie.join("@")}return S},serialize:function(u,g){var S=u,P=n(u.to);if(P){for(var N=0,Z=P.length;N<Z;++N){var re=String(P[N]),ne=re.lastIndexOf("@"),ye=re.slice(0,ne).replace(zr,ha).replace(zr,r).replace(bi,Ee),ee=re.slice(ne+1);try{ee=g.iri?te.toUnicode(ee):te.toASCII(ze(ee,g).toLowerCase())}catch(ae){S.error=S.error||"Email address's domain name can not be converted to "+(g.iri?"Unicode":"ASCII")+" via punycode: "+ae}P[N]=ye+"@"+ee}S.path=P.join(",")}var ue=u.headers=u.headers||{};u.subject&&(ue.subject=u.subject),u.body&&(ue.body=u.body);var _e=[];for(var ce in ue)ue[ce]!==mi[ce]&&_e.push(ce.replace(zr,ha).replace(zr,r).replace(ps,Ee)+"="+ue[ce].replace(zr,ha).replace(zr,r).replace(xi,Ee));return _e.length&&(S.query=_e.join("&")),S}},Ri=/^([^\:]+)\:(.*)/,vs={scheme:"urn",parse:function(u,g){var S=u.path&&u.path.match(Ri),P=u;if(S){var N=g.scheme||P.scheme||"urn",Z=S[1].toLowerCase(),re=S[2],ne=N+":"+(g.nid||Z),ye=ve[ne];P.nid=Z,P.nss=re,P.path=void 0,ye&&(P=ye.parse(P,g))}else P.error=P.error||"URN can not be parsed.";return P},serialize:function(u,g){var S=g.scheme||u.scheme||"urn",P=u.nid,N=S+":"+(g.nid||P),Z=ve[N];Z&&(u=Z.serialize(u,g));var re=u,ne=u.nss;return re.path=(P||g.nid)+":"+ne,re}},wi=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,gs={scheme:"urn:uuid",parse:function(u,g){var S=u;return S.uuid=S.nss,S.nss=void 0,!g.tolerant&&(!S.uuid||!S.uuid.match(wi))&&(S.error=S.error||"UUID is not valid."),S},serialize:function(u,g){var S=u;return S.nss=(u.uuid||"").toLowerCase(),S}};ve[it.scheme]=it,ve[us.scheme]=us,ve[lt.scheme]=lt,ve[fs.scheme]=fs,ve[ms.scheme]=ms,ve[vs.scheme]=vs,ve[gs.scheme]=gs,a.SCHEMES=ve,a.pctEncChar=Ee,a.pctDecChars=Te,a.parse=se,a.removeDotSegments=Le,a.serialize=Ie,a.resolveComponents=Oe,a.resolve=Ke,a.normalize=De,a.equal=bt,a.escapeComponent=fa,a.unescapeComponent=ze,Object.defineProperty(a,"__esModule",{value:!0})}))});var Ht=W((Af,sn)=>{"use strict";sn.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,n;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(r=s;r--!==0;){var l=n[r];if(!a(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}});var on=W((Cf,nn)=>{"use strict";nn.exports=function(e){for(var t=0,s=e.length,r=0,n;r<s;)t++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<s&&(n=e.charCodeAt(r),(n&64512)==56320&&r++);return t}});var Vr=W(($f,un)=>{"use strict";un.exports={copy:Qc,checkDataType:Ma,checkDataTypes:Zc,coerceToTypes:Kc,toHash:Fa,getProperty:Ua,escapeQuotes:qa,equal:Ht(),ucs2length:on(),varOccurences:Yc,varReplace:Xc,schemaHasRules:eu,schemaHasRulesExcept:ru,schemaUnknownRules:tu,toQuotedString:ja,getPathExpr:au,getPath:su,getData:iu,unescapeFragment:lu,unescapeJsonPointer:Ha,escapeFragment:cu,escapeJsonPointer:Va};function Qc(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function Ma(a,e,t,s){var r=s?" !== ":" === ",n=s?" || ":" && ",l=s?"!":"",o=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return l+"Array.isArray("+e+")";case"object":return"("+l+e+n+"typeof "+e+r+'"object"'+n+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+n+o+"("+e+" % 1)"+n+e+r+e+(t?n+l+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?n+l+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function Zc(a,e,t){switch(a.length){case 1:return Ma(a[0],e,t,!0);default:var s="",r=Fa(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var n in r)s+=(s?" && ":"")+Ma(n,e,t,!0);return s}}var ln=Fa(["string","number","integer","boolean","null"]);function Kc(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(ln[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(ln[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Fa(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var Gc=/^[a-z$_][a-z$_0-9]*$/i,Jc=/'|\\/g;function Ua(a){return typeof a=="number"?"["+a+"]":Gc.test(a)?"."+a:"['"+qa(a)+"']"}function qa(a){return a.replace(Jc,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Yc(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function Xc(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function eu(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function ru(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function tu(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function ja(a){return"'"+qa(a)+"'"}function au(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return cn(a,r)}function su(a,e,t){var s=ja(t?"/"+Va(e):Ua(e));return cn(a,s)}var nu=/^\/(?:[^~]|~0|~1)*$/,ou=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function iu(a,e,t){var s,r,n,l;if(a==="")return"rootData";if(a[0]=="/"){if(!nu.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,n="rootData"}else{if(l=a.match(ou),!l)throw new Error("Invalid JSON-pointer: "+a);if(s=+l[1],r=l[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(n="data"+(e-s||""),!r)return n}for(var o=n,f=r.split("/"),d=0;d<f.length;d++){var h=f[d];h&&(n+=Ua(Ha(h)),o+=" && "+n)}return o}function cn(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function lu(a){return Ha(decodeURIComponent(a))}function cu(a){return encodeURIComponent(Va(a))}function Va(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Ha(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var za=W((Df,dn)=>{"use strict";var uu=Vr();dn.exports=du;function du(a){uu.copy(a,this)}});var hn=W((kf,fn)=>{"use strict";var gr=fn.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};zt(e,s,r,a,"",a)};gr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};gr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};gr.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};gr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function zt(a,e,t,s,r,n,l,o,f,d){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,n,l,o,f,d);for(var h in s){var m=s[h];if(Array.isArray(m)){if(h in gr.arrayKeywords)for(var E=0;E<m.length;E++)zt(a,e,t,m[E],r+"/"+h+"/"+E,n,r,h,s,E)}else if(h in gr.propsKeywords){if(m&&typeof m=="object")for(var c in m)zt(a,e,t,m[c],r+"/"+h+"/"+fu(c),n,r,h,s,c)}else(h in gr.keywords||a.allKeys&&!(h in gr.skipKeywords))&&zt(a,e,t,m,r+"/"+h,n,r,h,s)}t(s,r,n,l,o,f,d)}}function fu(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var Gt=W((Nf,gn)=>{"use strict";var St=an(),pn=Ht(),Zt=Vr(),Bt=za(),hu=hn();gn.exports=_r;_r.normalizeId=yr;_r.fullPath=Wt;_r.url=Qt;_r.ids=yu;_r.inlineRef=Ba;_r.schema=Kt;function _r(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return _r.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof Bt)return Ba(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=Kt.call(this,e,t),n,l,o;return r&&(n=r.schema,e=r.root,o=r.baseId),n instanceof Bt?l=n.validate||a.call(this,n.schema,e,void 0,o):n!==void 0&&(l=Ba(n,this._opts.inlineRefs)?n:a.call(this,n,e,void 0,o)),l}function Kt(a,e){var t=St.parse(e),s=vn(t),r=Wt(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var n=yr(s),l=this._refs[n];if(typeof l=="string")return pu.call(this,a,l,t);if(l instanceof Bt)l.validate||this._compile(l),a=l;else if(l=this._schemas[n],l instanceof Bt){if(l.validate||this._compile(l),n==yr(e))return{schema:l,root:a,baseId:r};a=l}else return;if(!a.schema)return;r=Wt(this._getId(a.schema))}return mn.call(this,t,r,a.schema,a)}function pu(a,e,t){var s=Kt.call(this,a,e);if(s){var r=s.schema,n=s.baseId;a=s.root;var l=this._getId(r);return l&&(n=Qt(n,l)),mn.call(this,t,n,r,a)}}var mu=Zt.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function mn(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),n=1;n<r.length;n++){var l=r[n];if(l){if(l=Zt.unescapeFragment(l),t=t[l],t===void 0)break;var o;if(!mu[l]&&(o=this._getId(t),o&&(e=Qt(e,o)),t.$ref)){var f=Qt(e,t.$ref),d=Kt.call(this,s,f);d&&(t=d.schema,s=d.root,e=d.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var vu=Zt.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ba(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Wa(a);if(e)return Qa(a)<=e}function Wa(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!Wa(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!Wa(e)))return!1;return!0}function Qa(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=Qa(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(vu[r])e++;else if(t=a[r],typeof t=="object"&&(e+=Qa(t)+1),e==1/0)return 1/0}return e}function Wt(a,e){e!==!1&&(a=yr(a));var t=St.parse(a);return vn(t)}function vn(a){return St.serialize(a).split("#")[0]+"#"}var gu=/#\/?$/;function yr(a){return a?a.replace(gu,""):""}function Qt(a,e){return e=yr(e),St.resolve(a,e)}function yu(a){var e=yr(this._getId(a)),t={"":e},s={"":Wt(e,!1)},r={},n=this;return hu(a,{allKeys:!0},function(l,o,f,d,h,m,E){if(o!==""){var c=n._getId(l),y=t[d],_=s[d]+"/"+h;if(E!==void 0&&(_+="/"+(typeof E=="number"?E:Zt.escapeFragment(E))),typeof c=="string"){c=y=yr(y?St.resolve(y,c):c);var v=n._refs[c];if(typeof v=="string"&&(v=n._refs[v]),v&&v.schema){if(!pn(l,v.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=yr(_))if(c[0]=="#"){if(r[c]&&!pn(l,r[c]))throw new Error('id "'+c+'" resolves to more than one schema');r[c]=l}else n._refs[c]=_}t[o]=y,s[o]=_}}),r}});var Jt=W((Lf,_n)=>{"use strict";var Za=Gt();_n.exports={Validation:yn(_u),MissingRef:yn(Ka)};function _u(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}Ka.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function Ka(a,e,t){this.message=t||Ka.message(a,e),this.missingRef=Za.url(a,e),this.missingSchema=Za.normalizeId(Za.fullPath(this.missingRef))}function yn(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var Ga=W((Mf,En)=>{"use strict";En.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&(function(n){return function(l){return function(o,f){var d={key:o,value:l[o]},h={key:f,value:l[f]};return n(d,h)}}})(e.cmp),r=[];return(function n(l){if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l!==void 0){if(typeof l=="number")return isFinite(l)?""+l:"null";if(typeof l!="object")return JSON.stringify(l);var o,f;if(Array.isArray(l)){for(f="[",o=0;o<l.length;o++)o&&(f+=","),f+=n(l[o])||"null";return f+"]"}if(l===null)return"null";if(r.indexOf(l)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=r.push(l)-1,h=Object.keys(l).sort(s&&s(l));for(f="",o=0;o<h.length;o++){var m=h[o],E=n(l[m]);E&&(f&&(f+=","),f+=JSON.stringify(m)+":"+E)}return r.splice(d,1),"{"+f+"}"}})(a)}});var Ja=W((jf,Sn)=>{"use strict";Sn.exports=function(e,t,s){var r="",n=e.schema.$async===!0,l=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var d="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(d);else throw new Error(d)}}if(e.isTop&&(r+=" var validate = ",n&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(l||e.schema.$ref)){var t="false schema",h=e.level,m=e.dataLevel,E=e.schema[t],c=e.schemaPath+e.util.getProperty(t),y=e.errSchemaPath+"/"+t,I=!e.opts.allErrors,F,_="data"+(m||""),w="valid"+h;if(e.schema===!1){e.isTop?I=!0:r+=" var "+w+" = false; ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(F||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var b=r;r=v.pop(),!e.compositeRule&&I?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+w+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var T=e.isTop,h=e.level=0,m=e.dataLevel=0,_="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var x="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(x);else throw new Error(x)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,m=e.dataLevel,_="data"+(m||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),n&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+h+" = errors;"}var w="valid"+h,I=!e.opts.allErrors,A="",V="",F,C=e.schema.type,U=Array.isArray(C);if(C&&e.opts.nullable&&e.schema.nullable===!0&&(U?C.indexOf("null")==-1&&(C=C.concat("null")):C!="null"&&(C=[C,"null"],U=!0)),U&&C.length==1&&(C=C[0],U=!1),e.schema.$ref&&l){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(l=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),C){if(e.opts.coerceTypes)var j=e.util.coerceToTypes(e.opts.coerceTypes,C);var L=e.RULES.types[C];if(j||U||L===!0||L&&!Se(L)){var c=e.schemaPath+".type",y=e.errSchemaPath+"/type",c=e.schemaPath+".type",y=e.errSchemaPath+"/type",O=U?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[O](C,_,e.opts.strictNumbers,!0)+") { ",j){var $="dataType"+h,M="coerced"+h;r+=" var "+$+" = typeof "+_+"; var "+M+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+$+" == 'object' && Array.isArray("+_+") && "+_+".length == 1) { "+_+" = "+_+"[0]; "+$+" = typeof "+_+"; if ("+e.util.checkDataType(e.schema.type,_,e.opts.strictNumbers)+") "+M+" = "+_+"; } "),r+=" if ("+M+" !== undefined) ; ";var oe=j;if(oe)for(var J,X=-1,G=oe.length-1;X<G;)J=oe[X+=1],J=="string"?r+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+M+" = '' + "+_+"; else if ("+_+" === null) "+M+" = ''; ":J=="number"||J=="integer"?(r+=" else if ("+$+" == 'boolean' || "+_+" === null || ("+$+" == 'string' && "+_+" && "+_+" == +"+_+" ",J=="integer"&&(r+=" && !("+_+" % 1)"),r+=")) "+M+" = +"+_+"; "):J=="boolean"?r+=" else if ("+_+" === 'false' || "+_+" === 0 || "+_+" === null) "+M+" = false; else if ("+_+" === 'true' || "+_+" === 1) "+M+" = true; ":J=="null"?r+=" else if ("+_+" === '' || "+_+" === 0 || "+_+" === false) "+M+" = null; ":e.opts.coerceTypes=="array"&&J=="array"&&(r+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+_+" == null) "+M+" = ["+_+"]; ");r+=" else {   ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",U?r+=""+C.join(","):r+=""+C,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",U?r+=""+C.join(","):r+=""+C,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var b=r;r=v.pop(),!e.compositeRule&&I?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+M+" !== undefined) {  ";var H=m?"data"+(m-1||""):"parentData",fe=m?e.dataPathArr[m]:"parentDataProperty";r+=" "+_+" = "+M+"; ",m||(r+="if ("+H+" !== undefined)"),r+=" "+H+"["+fe+"] = "+M+"; } "}else{var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",U?r+=""+C.join(","):r+=""+C,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",U?r+=""+C.join(","):r+=""+C,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var b=r;r=v.pop(),!e.compositeRule&&I?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!l)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",I&&(r+=" } if (errors === ",T?r+="0":r+="errs_"+h,r+=") { ",V+="}");else{var be=e.RULES;if(be){for(var L,we=-1,te=be.length-1;we<te;)if(L=be[we+=1],Se(L)){if(L.type&&(r+=" if ("+e.util.checkDataType(L.type,_,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(L.type=="object"&&e.schema.properties){var E=e.schema.properties,ve=Object.keys(E),Ee=ve;if(Ee)for(var Te,dr=-1,tr=Ee.length-1;dr<tr;){Te=Ee[dr+=1];var ge=E[Te];if(ge.default!==void 0){var he=_+e.util.getProperty(Te);if(e.compositeRule){if(e.opts.strictDefaults){var x="default is ignored for: "+he;if(e.opts.strictDefaults==="log")e.logger.warn(x);else throw new Error(x)}}else r+=" if ("+he+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+he+" === null || "+he+" === '' "),r+=" ) "+he+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ge.default)+" ":r+=" "+JSON.stringify(ge.default)+" ",r+="; "}}}else if(L.type=="array"&&Array.isArray(e.schema.items)){var Er=e.schema.items;if(Er){for(var ge,X=-1,xe=Er.length-1;X<xe;)if(ge=Er[X+=1],ge.default!==void 0){var he=_+"["+X+"]";if(e.compositeRule){if(e.opts.strictDefaults){var x="default is ignored for: "+he;if(e.opts.strictDefaults==="log")e.logger.warn(x);else throw new Error(x)}}else r+=" if ("+he+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+he+" === null || "+he+" === '' "),r+=" ) "+he+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ge.default)+" ":r+=" "+JSON.stringify(ge.default)+" ",r+="; "}}}}var se=L.rules;if(se){for(var fr,ar=-1,Sr=se.length-1;ar<Sr;)if(fr=se[ar+=1],Le(fr)){var Pr=fr.code(e,fr.keyword,L.type);Pr&&(r+=" "+Pr+" ",I&&(A+="}"))}}if(I&&(r+=" "+A+" ",A=""),L.type&&(r+=" } ",C&&C===L.type&&!j)){r+=" else { ";var c=e.schemaPath+".type",y=e.errSchemaPath+"/type",v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",U?r+=""+C.join(","):r+=""+C,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",U?r+=""+C.join(","):r+=""+C,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var b=r;r=v.pop(),!e.compositeRule&&I?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}I&&(r+=" if (errors === ",T?r+="0":r+="errs_"+h,r+=") { ",V+="}")}}}I&&(r+=" "+V+" "),T?(n?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+w+" = errors === errs_"+h+";";function Se(Oe){for(var Ke=Oe.rules,De=0;De<Ke.length;De++)if(Le(Ke[De]))return!0}function Le(Oe){return e.schema[Oe.keyword]!==void 0||Oe.implements&&Ie(Oe)}function Ie(Oe){for(var Ke=Oe.implements,De=0;De<Ke.length;De++)if(e.schema[Ke[De]]!==void 0)return!0}return r}});var wn=W((Ff,Rn)=>{"use strict";var Yt=Gt(),ea=Vr(),bn=Jt(),Eu=Ga(),Pn=Ja(),Su=ea.ucs2length,Pu=Ht(),bu=bn.Validation;Rn.exports=Ya;function Ya(a,e,t,s){var r=this,n=this._opts,l=[void 0],o={},f=[],d={},h=[],m={},E=[];e=e||{schema:a,refVal:l,refs:o};var c=xu.call(this,a,e,s),y=this._compilations[c.index];if(c.compiling)return y.callValidate=x;var _=this._formats,v=this.RULES;try{var b=w(a,e,t,s);y.validate=b;var T=y.callValidate;return T&&(T.schema=b.schema,T.errors=null,T.refs=b.refs,T.refVal=b.refVal,T.root=b.root,T.$async=b.$async,n.sourceCode&&(T.source=b.source)),b}finally{Ru.call(this,a,e,s)}function x(){var O=y.validate,$=O.apply(this,arguments);return x.errors=O.errors,$}function w(O,$,M,oe){var J=!$||$&&$.schema==O;if($.schema!=e.schema)return Ya.call(r,O,$,M,oe);var X=O.$async===!0,G=Pn({isTop:!0,schema:O,isRoot:J,baseId:oe,root:$,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:bn.MissingRef,RULES:v,validate:Pn,util:ea,resolve:Yt,resolveRef:I,usePattern:U,useDefault:j,useCustomRule:L,opts:n,formats:_,logger:r.logger,self:r});G=Xt(l,Ou)+Xt(f,wu)+Xt(h,Tu)+Xt(E,Iu)+G,n.processCode&&(G=n.processCode(G,O));var H;try{var fe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",G);H=fe(r,v,_,e,l,h,E,Pu,Su,bu),l[0]=H}catch(be){throw r.logger.error("Error compiling schema, function code:",G),be}return H.schema=O,H.errors=null,H.refs=o,H.refVal=l,H.root=J?H:$,X&&(H.$async=!0),n.sourceCode===!0&&(H.source={code:G,patterns:f,defaults:h}),H}function I(O,$,M){$=Yt.url(O,$);var oe=o[$],J,X;if(oe!==void 0)return J=l[oe],X="refVal["+oe+"]",C(J,X);if(!M&&e.refs){var G=e.refs[$];if(G!==void 0)return J=e.refVal[G],X=A($,J),C(J,X)}X=A($);var H=Yt.call(r,w,e,$);if(H===void 0){var fe=t&&t[$];fe&&(H=Yt.inlineRef(fe,n.inlineRefs)?fe:Ya.call(r,fe,e,t,O))}if(H===void 0)V($);else return F($,H),C(H,X)}function A(O,$){var M=l.length;return l[M]=$,o[O]=M,"refVal"+M}function V(O){delete o[O]}function F(O,$){var M=o[O];l[M]=$}function C(O,$){return typeof O=="object"||typeof O=="boolean"?{code:$,schema:O,inline:!0}:{code:$,$async:O&&!!O.$async}}function U(O){var $=d[O];return $===void 0&&($=d[O]=f.length,f[$]=O),"pattern"+$}function j(O){switch(typeof O){case"boolean":case"number":return""+O;case"string":return ea.toQuotedString(O);case"object":if(O===null)return"null";var $=Eu(O),M=m[$];return M===void 0&&(M=m[$]=h.length,h[M]=O),"default"+M}}function L(O,$,M,oe){if(r._opts.validateSchema!==!1){var J=O.definition.dependencies;if(J&&!J.every(function(Ee){return Object.prototype.hasOwnProperty.call(M,Ee)}))throw new Error("parent schema must have all required keywords: "+J.join(","));var X=O.definition.validateSchema;if(X){var G=X($);if(!G){var H="keyword schema is invalid: "+r.errorsText(X.errors);if(r._opts.validateSchema=="log")r.logger.error(H);else throw new Error(H)}}}var fe=O.definition.compile,be=O.definition.inline,we=O.definition.macro,te;if(fe)te=fe.call(r,$,M,oe);else if(we)te=we.call(r,$,M,oe),n.validateSchema!==!1&&r.validateSchema(te,!0);else if(be)te=be.call(r,oe,O.keyword,$,M);else if(te=O.definition.validate,!te)return;if(te===void 0)throw new Error('custom keyword "'+O.keyword+'"failed to compile');var ve=E.length;return E[ve]=te,{code:"customRule"+ve,validate:te}}}function xu(a,e,t){var s=xn.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function Ru(a,e,t){var s=xn.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function xn(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function wu(a,e){return"var pattern"+a+" = new RegExp("+ea.toQuotedString(e[a])+");"}function Tu(a){return"var default"+a+" = defaults["+a+"];"}function Ou(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function Iu(a){return"var customRule"+a+" = customRules["+a+"];"}function Xt(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var On=W((Uf,Tn)=>{"use strict";var ra=Tn.exports=function(){this._cache={}};ra.prototype.put=function(e,t){this._cache[e]=t};ra.prototype.get=function(e){return this._cache[e]};ra.prototype.del=function(e){delete this._cache[e]};ra.prototype.clear=function(){this._cache={}}});var Un=W((qf,Fn)=>{"use strict";var Au=Vr(),Cu=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$u=[0,31,28,31,30,31,30,31,31,30,31,30,31],Du=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,In=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ku=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Nu=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,An=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Cn=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,$n=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Dn=/^(?:\/(?:[^~/]|~0|~1)*)*$/,kn=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Nn=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Fn.exports=ta;function ta(a){return a=a=="full"?"full":"fast",Au.copy(ta[a])}ta.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":An,url:Cn,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:In,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:jn,uuid:$n,"json-pointer":Dn,"json-pointer-uri-fragment":kn,"relative-json-pointer":Nn};ta.full={date:Ln,time:Mn,"date-time":ju,uri:Uu,"uri-reference":Nu,"uri-template":An,url:Cn,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:In,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:jn,uuid:$n,"json-pointer":Dn,"json-pointer-uri-fragment":kn,"relative-json-pointer":Nn};function Lu(a){return a%4===0&&(a%100!==0||a%400===0)}function Ln(a){var e=a.match(Cu);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&Lu(t)?29:$u[s])}function Mn(a,e){var t=a.match(Du);if(!t)return!1;var s=t[1],r=t[2],n=t[3],l=t[5];return(s<=23&&r<=59&&n<=59||s==23&&r==59&&n==60)&&(!e||l)}var Mu=/t|\s/i;function ju(a){var e=a.split(Mu);return e.length==2&&Ln(e[0])&&Mn(e[1],!0)}var Fu=/\/|:/;function Uu(a){return Fu.test(a)&&ku.test(a)}var qu=/[^\\]\\Z/;function jn(a){if(qu.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var Vn=W((Vf,qn)=>{"use strict";qn.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(l||""),m="valid"+n,E,c;if(o=="#"||o=="#/")e.isRoot?(E=e.async,c="validate"):(E=e.root.schema.$async===!0,c="root.refVal[0]");else{var y=e.resolveRef(e.baseId,o,e.isRoot);if(y===void 0){var _=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(_);var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var b=r;r=v.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(_),d&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,_)}else if(y.inline){var T=e.util.copy(e);T.level++;var x="valid"+T.level;T.schema=y.schema,T.schemaPath="",T.errSchemaPath=o;var w=e.validate(T).replace(/validate\.schema/g,y.code);r+=" "+w+" ",d&&(r+=" if ("+x+") { ")}else E=y.$async===!0||e.async&&y.$async!==!1,c=y.code}if(c){var v=v||[];v.push(r),r="",e.opts.passContext?r+=" "+c+".call(this, ":r+=" "+c+"( ",r+=" "+h+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var I=l?"data"+(l-1||""):"parentData",A=l?e.dataPathArr[l]:"parentDataProperty";r+=" , "+I+" , "+A+", rootData)  ";var V=r;if(r=v.pop(),E){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(r+=" var "+m+"; "),r+=" try { await "+V+"; ",d&&(r+=" "+m+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(r+=" "+m+" = false; "),r+=" } ",d&&(r+=" if ("+m+") { ")}else r+=" if (!"+V+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",d&&(r+=" else { ")}return r}});var zn=W((Hf,Hn)=>{"use strict";Hn.exports=function(e,t,s){var r=" ",n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d=e.util.copy(e),h="";d.level++;var m="valid"+d.level,E=d.baseId,c=!0,y=n;if(y)for(var _,v=-1,b=y.length-1;v<b;)_=y[v+=1],(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(c=!1,d.schema=_,d.schemaPath=l+"["+v+"]",d.errSchemaPath=o+"/"+v,r+="  "+e.validate(d)+" ",d.baseId=E,f&&(r+=" if ("+m+") { ",h+="}"));return f&&(c?r+=" if (true) { ":r+=" "+h.slice(0,-1)+" "),r}});var Wn=W((zf,Bn)=>{"use strict";Bn.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c="errs__"+n,y=e.util.copy(e),_="";y.level++;var v="valid"+y.level,b=o.every(function(F){return e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all)});if(b){var T=y.baseId;r+=" var "+c+" = errors; var "+E+" = false;  ";var x=e.compositeRule;e.compositeRule=y.compositeRule=!0;var w=o;if(w)for(var I,A=-1,V=w.length-1;A<V;)I=w[A+=1],y.schema=I,y.schemaPath=f+"["+A+"]",y.errSchemaPath=d+"/"+A,r+="  "+e.validate(y)+" ",y.baseId=T,r+=" "+E+" = "+E+" || "+v+"; if (!"+E+") { ",_+="}";e.compositeRule=y.compositeRule=x,r+=" "+_+" if (!"+E+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else h&&(r+=" if (true) { ");return r}});var Zn=W((Bf,Qn)=>{"use strict";Qn.exports=function(e,t,s){var r=" ",n=e.schema[t],l=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,f=e.util.toQuotedString(n);return e.opts.$comment===!0?r+=" console.log("+f+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+f+", "+e.util.toQuotedString(l)+", validate.root.schema);"),r}});var Gn=W((Wf,Kn)=>{"use strict";Kn.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c=e.opts.$data&&o&&o.$data,y;c?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",y="schema"+n):y=o,c||(r+=" var schema"+n+" = validate.schema"+f+";"),r+="var "+E+" = equal("+m+", schema"+n+"); if (!"+E+") {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValue: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;return r=_.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}});var Yn=W((Qf,Jn)=>{"use strict";Jn.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c="errs__"+n,y=e.util.copy(e),_="";y.level++;var v="valid"+y.level,b="i"+n,T=y.dataLevel=e.dataLevel+1,x="data"+T,w=e.baseId,I=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(r+="var "+c+" = errors;var "+E+";",I){var A=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=o,y.schemaPath=f,y.errSchemaPath=d,r+=" var "+v+" = false; for (var "+b+" = 0; "+b+" < "+m+".length; "+b+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var V=m+"["+b+"]";y.dataPathArr[T]=b;var F=e.validate(y);y.baseId=w,e.util.varOccurences(F,x)<2?r+=" "+e.util.varReplace(F,x,V)+" ":r+=" var "+x+" = "+V+"; "+F+" ",r+=" if ("+v+") break; }  ",e.compositeRule=y.compositeRule=A,r+=" "+_+" if (!"+v+") {"}else r+=" if ("+m+".length == 0) {";var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var U=r;return r=C.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+U+"]); ":r+=" validate.errors = ["+U+"]; return false; ":r+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",I&&(r+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var eo=W((Zf,Xn)=>{"use strict";Xn.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="errs__"+n,c=e.util.copy(e),y="";c.level++;var _="valid"+c.level,v={},b={},T=e.opts.ownProperties;for(A in o)if(A!="__proto__"){var x=o[A],w=Array.isArray(x)?b:v;w[A]=x}r+="var "+E+" = errors;";var I=e.errorPath;r+="var missing"+n+";";for(var A in b)if(w=b[A],w.length){if(r+=" if ( "+m+e.util.getProperty(A)+" !== undefined ",T&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(A)+"') "),h){r+=" && ( ";var V=w;if(V)for(var F,C=-1,U=V.length-1;C<U;){F=V[C+=1],C&&(r+=" || ");var j=e.util.getProperty(F),L=m+j;r+=" ( ( "+L+" === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:j)+") ) "}r+=")) {  ";var O="missing"+n,$="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(I,O,!0):I+" + "+O);var M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(A)+"', missingProperty: '"+$+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(w.length==1?w[0]:w.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",w.length==1?r+="property "+e.util.escapeQuotes(w[0]):r+="properties "+e.util.escapeQuotes(w.join(", ")),r+=" when property "+e.util.escapeQuotes(A)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var oe=r;r=M.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+oe+"]); ":r+=" validate.errors = ["+oe+"]; return false; ":r+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var J=w;if(J)for(var F,X=-1,G=J.length-1;X<G;){F=J[X+=1];var j=e.util.getProperty(F),$=e.util.escapeQuotes(F),L=m+j;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(I,F,e.opts.jsonPointers)),r+=" if ( "+L+" === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(A)+"', missingProperty: '"+$+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(w.length==1?w[0]:w.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",w.length==1?r+="property "+e.util.escapeQuotes(w[0]):r+="properties "+e.util.escapeQuotes(w.join(", ")),r+=" when property "+e.util.escapeQuotes(A)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",h&&(y+="}",r+=" else { ")}e.errorPath=I;var H=c.baseId;for(var A in v){var x=v[A];(e.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:e.util.schemaHasRules(x,e.RULES.all))&&(r+=" "+_+" = true; if ( "+m+e.util.getProperty(A)+" !== undefined ",T&&(r+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(A)+"') "),r+=") { ",c.schema=x,c.schemaPath=f+e.util.getProperty(A),c.errSchemaPath=d+"/"+e.util.escapeFragment(A),r+="  "+e.validate(c)+" ",c.baseId=H,r+=" }  ",h&&(r+=" if ("+_+") { ",y+="}"))}return h&&(r+="   "+y+" if ("+E+" == errors) {"),r}});var to=W((Kf,ro)=>{"use strict";ro.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c=e.opts.$data&&o&&o.$data,y;c?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",y="schema"+n):y=o;var _="i"+n,v="schema"+n;c||(r+=" var "+v+" = validate.schema"+f+";"),r+="var "+E+";",c&&(r+=" if (schema"+n+" === undefined) "+E+" = true; else if (!Array.isArray(schema"+n+")) "+E+" = false; else {"),r+=""+E+" = false;for (var "+_+"=0; "+_+"<"+v+".length; "+_+"++) if (equal("+m+", "+v+"["+_+"])) { "+E+" = true; break; }",c&&(r+="  }  "),r+=" if (!"+E+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValues: schema"+n+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var T=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}});var so=W((Gf,ao)=>{"use strict";ao.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||"");if(e.opts.format===!1)return h&&(r+=" if (true) { "),r;var E=e.opts.$data&&o&&o.$data,c;E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o;var y=e.opts.unknownFormats,_=Array.isArray(y);if(E){var v="format"+n,b="isObject"+n,T="formatType"+n;r+=" var "+v+" = formats["+c+"]; var "+b+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+T+" = "+b+" && "+v+".type || 'string'; if ("+b+") { ",e.async&&(r+=" var async"+n+" = "+v+".async; "),r+=" "+v+" = "+v+".validate; } if (  ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" (",y!="ignore"&&(r+=" ("+c+" && !"+v+" ",_&&(r+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),r+=") || "),r+=" ("+v+" && "+T+" == '"+s+"' && !(typeof "+v+" == 'function' ? ",e.async?r+=" (async"+n+" ? await "+v+"("+m+") : "+v+"("+m+")) ":r+=" "+v+"("+m+") ",r+=" : "+v+".test("+m+"))))) {"}else{var v=e.formats[o];if(!v){if(y=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(r+=" if (true) { "),r;if(_&&y.indexOf(o)>=0)return h&&(r+=" if (true) { "),r;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var b=typeof v=="object"&&!(v instanceof RegExp)&&v.validate,T=b&&v.type||"string";if(b){var x=v.async===!0;v=v.validate}if(T!=s)return h&&(r+=" if (true) { "),r;if(x){if(!e.async)throw new Error("async format in sync schema");var w="formats"+e.util.getProperty(o)+".validate";r+=" if (!(await "+w+"("+m+"))) { "}else{r+=" if (! ";var w="formats"+e.util.getProperty(o);b&&(w+=".validate"),typeof v=="function"?r+=" "+w+"("+m+") ":r+=" "+w+".test("+m+") ",r+=") { "}}var I=I||[];I.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { format:  ",E?r+=""+c:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,E?r+="' + "+c+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var A=r;return r=I.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+A+"]); ":r+=" validate.errors = ["+A+"]; return false; ":r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}});var oo=W((Jf,no)=>{"use strict";no.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c="errs__"+n,y=e.util.copy(e);y.level++;var _="valid"+y.level,v=e.schema.then,b=e.schema.else,T=v!==void 0&&(e.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:e.util.schemaHasRules(v,e.RULES.all)),x=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),w=y.baseId;if(T||x){var I;y.createErrors=!1,y.schema=o,y.schemaPath=f,y.errSchemaPath=d,r+=" var "+c+" = errors; var "+E+" = true;  ";var A=e.compositeRule;e.compositeRule=y.compositeRule=!0,r+="  "+e.validate(y)+" ",y.baseId=w,y.createErrors=!0,r+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=A,T?(r+=" if ("+_+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(y)+" ",y.baseId=w,r+=" "+E+" = "+_+"; ",T&&x?(I="ifClause"+n,r+=" var "+I+" = 'then'; "):I="'then'",r+=" } ",x&&(r+=" else { ")):r+=" if (!"+_+") { ",x&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(y)+" ",y.baseId=w,r+=" "+E+" = "+_+"; ",T&&x?(I="ifClause"+n,r+=" var "+I+" = 'else'; "):I="'else'",r+=" } "),r+=" if (!"+E+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { failingKeyword: "+I+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+I+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}});var lo=W((Yf,io)=>{"use strict";io.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c="errs__"+n,y=e.util.copy(e),_="";y.level++;var v="valid"+y.level,b="i"+n,T=y.dataLevel=e.dataLevel+1,x="data"+T,w=e.baseId;if(r+="var "+c+" = errors;var "+E+";",Array.isArray(o)){var I=e.schema.additionalItems;if(I===!1){r+=" "+E+" = "+m+".length <= "+o.length+"; ";var A=d;d=e.errSchemaPath+"/additionalItems",r+="  if (!"+E+") {   ";var V=V||[];V.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var F=r;r=V.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+F+"]); ":r+=" validate.errors = ["+F+"]; return false; ":r+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",d=A,h&&(_+="}",r+=" else { ")}var C=o;if(C){for(var U,j=-1,L=C.length-1;j<L;)if(U=C[j+=1],e.opts.strictKeywords?typeof U=="object"&&Object.keys(U).length>0||U===!1:e.util.schemaHasRules(U,e.RULES.all)){r+=" "+v+" = true; if ("+m+".length > "+j+") { ";var O=m+"["+j+"]";y.schema=U,y.schemaPath=f+"["+j+"]",y.errSchemaPath=d+"/"+j,y.errorPath=e.util.getPathExpr(e.errorPath,j,e.opts.jsonPointers,!0),y.dataPathArr[T]=j;var $=e.validate(y);y.baseId=w,e.util.varOccurences($,x)<2?r+=" "+e.util.varReplace($,x,O)+" ":r+=" var "+x+" = "+O+"; "+$+" ",r+=" }  ",h&&(r+=" if ("+v+") { ",_+="}")}}if(typeof I=="object"&&(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all))){y.schema=I,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+v+" = true; if ("+m+".length > "+o.length+") {  for (var "+b+" = "+o.length+"; "+b+" < "+m+".length; "+b+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var O=m+"["+b+"]";y.dataPathArr[T]=b;var $=e.validate(y);y.baseId=w,e.util.varOccurences($,x)<2?r+=" "+e.util.varReplace($,x,O)+" ":r+=" var "+x+" = "+O+"; "+$+" ",h&&(r+=" if (!"+v+") break; "),r+=" } }  ",h&&(r+=" if ("+v+") { ",_+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){y.schema=o,y.schemaPath=f,y.errSchemaPath=d,r+="  for (var "+b+" = 0; "+b+" < "+m+".length; "+b+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var O=m+"["+b+"]";y.dataPathArr[T]=b;var $=e.validate(y);y.baseId=w,e.util.varOccurences($,x)<2?r+=" "+e.util.varReplace($,x,O)+" ":r+=" var "+x+" = "+O+"; "+$+" ",h&&(r+=" if (!"+v+") break; "),r+=" }"}return h&&(r+=" "+_+" if ("+c+" == errors) {"),r}});var Xa=W((Xf,co)=>{"use strict";co.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,w,m="data"+(l||""),E=e.opts.$data&&o&&o.$data,c;E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o;var y=t=="maximum",_=y?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[_],b=e.opts.$data&&v&&v.$data,T=y?"<":">",x=y?">":"<",w=void 0;if(!(E||typeof o=="number"||o===void 0))throw new Error(t+" must be number");if(!(b||v===void 0||typeof v=="number"||typeof v=="boolean"))throw new Error(_+" must be number or boolean");if(b){var I=e.util.getData(v.$data,l,e.dataPathArr),A="exclusive"+n,V="exclType"+n,F="exclIsNumber"+n,C="op"+n,U="' + "+C+" + '";r+=" var schemaExcl"+n+" = "+I+"; ",I="schemaExcl"+n,r+=" var "+A+"; var "+V+" = typeof "+I+"; if ("+V+" != 'boolean' && "+V+" != 'undefined' && "+V+" != 'number') { ";var w=_,j=j||[];j.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+_+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var L=r;r=j.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+V+" == 'number' ? ( ("+A+" = "+c+" === undefined || "+I+" "+T+"= "+c+") ? "+m+" "+x+"= "+I+" : "+m+" "+x+" "+c+" ) : ( ("+A+" = "+I+" === true) ? "+m+" "+x+"= "+c+" : "+m+" "+x+" "+c+" ) || "+m+" !== "+m+") { var op"+n+" = "+A+" ? '"+T+"' : '"+T+"='; ",o===void 0&&(w=_,d=e.errSchemaPath+"/"+_,c=I,E=b)}else{var F=typeof v=="number",U=T;if(F&&E){var C="'"+U+"'";r+=" if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" ( "+c+" === undefined || "+v+" "+T+"= "+c+" ? "+m+" "+x+"= "+v+" : "+m+" "+x+" "+c+" ) || "+m+" !== "+m+") { "}else{F&&o===void 0?(A=!0,w=_,d=e.errSchemaPath+"/"+_,c=v,x+="="):(F&&(c=Math[y?"min":"max"](v,o)),v===(F?c:!0)?(A=!0,w=_,d=e.errSchemaPath+"/"+_,x+="="):(A=!1,U+="="));var C="'"+U+"'";r+=" if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+m+" "+x+" "+c+" || "+m+" !== "+m+") { "}}w=w||t;var j=j||[];j.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { comparison: "+C+", limit: "+c+", exclusive: "+A+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+U+" ",E?r+="' + "+c:r+=""+c+"'"),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var L=r;return r=j.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}});var es=W((eh,uo)=>{"use strict";uo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,_,m="data"+(l||""),E=e.opts.$data&&o&&o.$data,c;if(E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o,!(E||typeof o=="number"))throw new Error(t+" must be number");var y=t=="maxItems"?">":"<";r+="if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+m+".length "+y+" "+c+") { ";var _=t,v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",E?r+="' + "+c+" + '":r+=""+o,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;return r=v.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var rs=W((rh,fo)=>{"use strict";fo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,_,m="data"+(l||""),E=e.opts.$data&&o&&o.$data,c;if(E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o,!(E||typeof o=="number"))throw new Error(t+" must be number");var y=t=="maxLength"?">":"<";r+="if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?r+=" "+m+".length ":r+=" ucs2length("+m+") ",r+=" "+y+" "+c+") { ";var _=t,v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",E?r+="' + "+c+" + '":r+=""+o,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;return r=v.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var ts=W((th,ho)=>{"use strict";ho.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,_,m="data"+(l||""),E=e.opts.$data&&o&&o.$data,c;if(E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o,!(E||typeof o=="number"))throw new Error(t+" must be number");var y=t=="maxProperties"?">":"<";r+="if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" Object.keys("+m+").length "+y+" "+c+") { ";var _=t,v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",E?r+="' + "+c+" + '":r+=""+o,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;return r=v.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var mo=W((ah,po)=>{"use strict";po.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E=e.opts.$data&&o&&o.$data,c;if(E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o,!(E||typeof o=="number"))throw new Error(t+" must be number");r+="var division"+n+";if (",E&&(r+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),r+=" (division"+n+" = "+m+" / "+c+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+n+" !== parseInt(division"+n+") ",r+=" ) ",E&&(r+="  )  "),r+=" ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",E?r+="' + "+c:r+=""+c+"'"),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var _=r;return r=y.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var go=W((sh,vo)=>{"use strict";vo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="errs__"+n,c=e.util.copy(e);c.level++;var y="valid"+c.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=d,r+=" var "+E+" = errors;  ";var _=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var v;c.opts.allErrors&&(v=c.opts.allErrors,c.opts.allErrors=!1),r+=" "+e.validate(c)+" ",c.createErrors=!0,v&&(c.opts.allErrors=v),e.compositeRule=c.compositeRule=_,r+=" if ("+y+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var T=r;r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+E+"; if (vErrors !== null) { if ("+E+") vErrors.length = "+E+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ");return r}});var _o=W((nh,yo)=>{"use strict";yo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c="errs__"+n,y=e.util.copy(e),_="";y.level++;var v="valid"+y.level,b=y.baseId,T="prevValid"+n,x="passingSchemas"+n;r+="var "+c+" = errors , "+T+" = false , "+E+" = false , "+x+" = null; ";var w=e.compositeRule;e.compositeRule=y.compositeRule=!0;var I=o;if(I)for(var A,V=-1,F=I.length-1;V<F;)A=I[V+=1],(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))?(y.schema=A,y.schemaPath=f+"["+V+"]",y.errSchemaPath=d+"/"+V,r+="  "+e.validate(y)+" ",y.baseId=b):r+=" var "+v+" = true; ",V&&(r+=" if ("+v+" && "+T+") { "+E+" = false; "+x+" = ["+x+", "+V+"]; } else { ",_+="}"),r+=" if ("+v+") { "+E+" = "+T+" = true; "+x+" = "+V+"; }";return e.compositeRule=y.compositeRule=w,r+=""+_+"if (!"+E+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { passingSchemas: "+x+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var So=W((oh,Eo)=>{"use strict";Eo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E=e.opts.$data&&o&&o.$data,c;E?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",c="schema"+n):c=o;var y=E?"(new RegExp("+c+"))":e.usePattern(o);r+="if ( ",E&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" !"+y+".test("+m+") ) {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",E?r+=""+c:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,E?r+="' + "+c+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",E?r+="validate.schema"+f:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;return r=_.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r}});var bo=W((ih,Po)=>{"use strict";Po.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="errs__"+n,c=e.util.copy(e),y="";c.level++;var _="valid"+c.level,v="key"+n,b="idx"+n,T=c.dataLevel=e.dataLevel+1,x="data"+T,w="dataProperties"+n,I=Object.keys(o||{}).filter(X),A=e.schema.patternProperties||{},V=Object.keys(A).filter(X),F=e.schema.additionalProperties,C=I.length||V.length,U=F===!1,j=typeof F=="object"&&Object.keys(F).length,L=e.opts.removeAdditional,O=U||j||L,$=e.opts.ownProperties,M=e.baseId,oe=e.schema.required;if(oe&&!(e.opts.$data&&oe.$data)&&oe.length<e.opts.loopRequired)var J=e.util.toHash(oe);function X(ze){return ze!=="__proto__"}if(r+="var "+E+" = errors;var "+_+" = true;",$&&(r+=" var "+w+" = undefined;"),O){if($?r+=" "+w+" = "+w+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+w+".length; "+b+"++) { var "+v+" = "+w+"["+b+"]; ":r+=" for (var "+v+" in "+m+") { ",C){if(r+=" var isAdditional"+n+" = !(false ",I.length)if(I.length>8)r+=" || validate.schema"+f+".hasOwnProperty("+v+") ";else{var G=I;if(G)for(var H,fe=-1,be=G.length-1;fe<be;)H=G[fe+=1],r+=" || "+v+" == "+e.util.toQuotedString(H)+" "}if(V.length){var we=V;if(we)for(var te,ve=-1,Ee=we.length-1;ve<Ee;)te=we[ve+=1],r+=" || "+e.usePattern(te)+".test("+v+") "}r+=" ); if (isAdditional"+n+") { "}if(L=="all")r+=" delete "+m+"["+v+"]; ";else{var Te=e.errorPath,dr="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),U)if(L)r+=" delete "+m+"["+v+"]; ";else{r+=" "+_+" = false; ";var tr=d;d=e.errSchemaPath+"/additionalProperties";var ge=ge||[];ge.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { additionalProperty: '"+dr+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var he=r;r=ge.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+he+"]); ":r+=" validate.errors = ["+he+"]; return false; ":r+=" var err = "+he+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=tr,h&&(r+=" break; ")}else if(j)if(L=="failing"){r+=" var "+E+" = errors;  ";var Er=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var xe=m+"["+v+"]";c.dataPathArr[T]=v;var se=e.validate(c);c.baseId=M,e.util.varOccurences(se,x)<2?r+=" "+e.util.varReplace(se,x,xe)+" ":r+=" var "+x+" = "+xe+"; "+se+" ",r+=" if (!"+_+") { errors = "+E+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+v+"]; }  ",e.compositeRule=c.compositeRule=Er}else{c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var xe=m+"["+v+"]";c.dataPathArr[T]=v;var se=e.validate(c);c.baseId=M,e.util.varOccurences(se,x)<2?r+=" "+e.util.varReplace(se,x,xe)+" ":r+=" var "+x+" = "+xe+"; "+se+" ",h&&(r+=" if (!"+_+") break; ")}e.errorPath=Te}C&&(r+=" } "),r+=" }  ",h&&(r+=" if ("+_+") { ",y+="}")}var fr=e.opts.useDefaults&&!e.compositeRule;if(I.length){var ar=I;if(ar)for(var H,Sr=-1,Pr=ar.length-1;Sr<Pr;){H=ar[Sr+=1];var Se=o[H];if(e.opts.strictKeywords?typeof Se=="object"&&Object.keys(Se).length>0||Se===!1:e.util.schemaHasRules(Se,e.RULES.all)){var Le=e.util.getProperty(H),xe=m+Le,Ie=fr&&Se.default!==void 0;c.schema=Se,c.schemaPath=f+Le,c.errSchemaPath=d+"/"+e.util.escapeFragment(H),c.errorPath=e.util.getPath(e.errorPath,H,e.opts.jsonPointers),c.dataPathArr[T]=e.util.toQuotedString(H);var se=e.validate(c);if(c.baseId=M,e.util.varOccurences(se,x)<2){se=e.util.varReplace(se,x,xe);var Oe=xe}else{var Oe=x;r+=" var "+x+" = "+xe+"; "}if(Ie)r+=" "+se+" ";else{if(J&&J[H]){r+=" if ( "+Oe+" === undefined ",$&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(H)+"') "),r+=") { "+_+" = false; ";var Te=e.errorPath,tr=d,Ke=e.util.escapeQuotes(H);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Te,H,e.opts.jsonPointers)),d=e.errSchemaPath+"/required";var ge=ge||[];ge.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+Ke+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Ke+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var he=r;r=ge.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+he+"]); ":r+=" validate.errors = ["+he+"]; return false; ":r+=" var err = "+he+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=tr,e.errorPath=Te,r+=" } else { "}else h?(r+=" if ( "+Oe+" === undefined ",$&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(H)+"') "),r+=") { "+_+" = true; } else { "):(r+=" if ("+Oe+" !== undefined ",$&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(H)+"') "),r+=" ) { ");r+=" "+se+" } "}}h&&(r+=" if ("+_+") { ",y+="}")}}if(V.length){var De=V;if(De)for(var te,bt=-1,fa=De.length-1;bt<fa;){te=De[bt+=1];var Se=A[te];if(e.opts.strictKeywords?typeof Se=="object"&&Object.keys(Se).length>0||Se===!1:e.util.schemaHasRules(Se,e.RULES.all)){c.schema=Se,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(te),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(te),$?r+=" "+w+" = "+w+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+w+".length; "+b+"++) { var "+v+" = "+w+"["+b+"]; ":r+=" for (var "+v+" in "+m+") { ",r+=" if ("+e.usePattern(te)+".test("+v+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var xe=m+"["+v+"]";c.dataPathArr[T]=v;var se=e.validate(c);c.baseId=M,e.util.varOccurences(se,x)<2?r+=" "+e.util.varReplace(se,x,xe)+" ":r+=" var "+x+" = "+xe+"; "+se+" ",h&&(r+=" if (!"+_+") break; "),r+=" } ",h&&(r+=" else "+_+" = true; "),r+=" }  ",h&&(r+=" if ("+_+") { ",y+="}")}}}return h&&(r+=" "+y+" if ("+E+" == errors) {"),r}});var Ro=W((lh,xo)=>{"use strict";xo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="errs__"+n,c=e.util.copy(e),y="";c.level++;var _="valid"+c.level;if(r+="var "+E+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=d;var v="key"+n,b="idx"+n,T="i"+n,x="' + "+v+" + '",w=c.dataLevel=e.dataLevel+1,I="data"+w,A="dataProperties"+n,V=e.opts.ownProperties,F=e.baseId;V&&(r+=" var "+A+" = undefined; "),V?r+=" "+A+" = "+A+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+A+".length; "+b+"++) { var "+v+" = "+A+"["+b+"]; ":r+=" for (var "+v+" in "+m+") { ",r+=" var startErrs"+n+" = errors; ";var C=v,U=e.compositeRule;e.compositeRule=c.compositeRule=!0;var j=e.validate(c);c.baseId=F,e.util.varOccurences(j,I)<2?r+=" "+e.util.varReplace(j,I,C)+" ":r+=" var "+I+" = "+C+"; "+j+" ",e.compositeRule=c.compositeRule=U,r+=" if (!"+_+") { for (var "+T+"=startErrs"+n+"; "+T+"<errors; "+T+"++) { vErrors["+T+"].propertyName = "+v+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { propertyName: '"+x+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+x+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),h&&(r+=" break; "),r+=" } }"}return h&&(r+=" "+y+" if ("+E+" == errors) {"),r}});var To=W((ch,wo)=>{"use strict";wo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c=e.opts.$data&&o&&o.$data,y;c?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",y="schema"+n):y=o;var _="schema"+n;if(!c)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var v=[],b=o;if(b)for(var T,x=-1,w=b.length-1;x<w;){T=b[x+=1];var I=e.schema.properties[T];I&&(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all))||(v[v.length]=T)}}else var v=o;if(c||v.length){var A=e.errorPath,V=c||v.length>=e.opts.loopRequired,F=e.opts.ownProperties;if(h)if(r+=" var missing"+n+"; ",V){c||(r+=" var "+_+" = validate.schema"+f+"; ");var C="i"+n,U="schema"+n+"["+C+"]",j="' + "+U+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(A,U,e.opts.jsonPointers)),r+=" var "+E+" = true; ",c&&(r+=" if (schema"+n+" === undefined) "+E+" = true; else if (!Array.isArray(schema"+n+")) "+E+" = false; else {"),r+=" for (var "+C+" = 0; "+C+" < "+_+".length; "+C+"++) { "+E+" = "+m+"["+_+"["+C+"]] !== undefined ",F&&(r+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+_+"["+C+"]) "),r+="; if (!"+E+") break; } ",c&&(r+="  }  "),r+="  if (!"+E+") {   ";var L=L||[];L.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+j+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+j+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var O=r;r=L.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var $=v;if($)for(var M,C=-1,oe=$.length-1;C<oe;){M=$[C+=1],C&&(r+=" || ");var J=e.util.getProperty(M),X=m+J;r+=" ( ( "+X+" === undefined ",F&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(M)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?M:J)+") ) "}r+=") {  ";var U="missing"+n,j="' + "+U+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(A,U,!0):A+" + "+U);var L=L||[];L.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+j+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+j+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var O=r;r=L.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(V){c||(r+=" var "+_+" = validate.schema"+f+"; ");var C="i"+n,U="schema"+n+"["+C+"]",j="' + "+U+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(A,U,e.opts.jsonPointers)),c&&(r+=" if ("+_+" && !Array.isArray("+_+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+j+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+j+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+_+" !== undefined) { "),r+=" for (var "+C+" = 0; "+C+" < "+_+".length; "+C+"++) { if ("+m+"["+_+"["+C+"]] === undefined ",F&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+_+"["+C+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+j+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+j+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(r+="  }  ")}else{var G=v;if(G)for(var M,H=-1,fe=G.length-1;H<fe;){M=G[H+=1];var J=e.util.getProperty(M),j=e.util.escapeQuotes(M),X=m+J;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(A,M,e.opts.jsonPointers)),r+=" if ( "+X+" === undefined ",F&&(r+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(M)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+j+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+j+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=A}else h&&(r+=" if (true) {");return r}});var Io=W((uh,Oo)=>{"use strict";Oo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),E="valid"+n,c=e.opts.$data&&o&&o.$data,y;if(c?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",y="schema"+n):y=o,(o||c)&&e.opts.uniqueItems!==!1){c&&(r+=" var "+E+"; if ("+y+" === false || "+y+" === undefined) "+E+" = true; else if (typeof "+y+" != 'boolean') "+E+" = false; else { "),r+=" var i = "+m+".length , "+E+" = true , j; if (i > 1) { ";var _=e.schema.items&&e.schema.items.type,v=Array.isArray(_);if(!_||_=="object"||_=="array"||v&&(_.indexOf("object")>=0||_.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+E+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var b="checkDataType"+(v?"s":"");r+=" if ("+e.util[b](_,"item",e.opts.strictNumbers,!0)+") continue; ",v&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+E+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",c&&(r+="  }  "),r+=" if (!"+E+") {   ";var T=T||[];T.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",c?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var x=r;r=T.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+x+"]); ":r+=" validate.errors = ["+x+"]; return false; ":r+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}});var Co=W((dh,Ao)=>{"use strict";Ao.exports={$ref:Vn(),allOf:zn(),anyOf:Wn(),$comment:Zn(),const:Gn(),contains:Yn(),dependencies:eo(),enum:to(),format:so(),if:oo(),items:lo(),maximum:Xa(),minimum:Xa(),maxItems:es(),minItems:es(),maxLength:rs(),minLength:rs(),maxProperties:ts(),minProperties:ts(),multipleOf:mo(),not:go(),oneOf:_o(),pattern:So(),properties:bo(),propertyNames:Ro(),required:To(),uniqueItems:Io(),validate:Ja()}});var ko=W((fh,Do)=>{"use strict";var $o=Co(),as=Vr().toHash;Do.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=as(t),e.types=as(r),e.forEach(function(n){n.rules=n.rules.map(function(l){var o;if(typeof l=="object"){var f=Object.keys(l)[0];o=l[f],l=f,o.forEach(function(h){t.push(h),e.all[h]=!0})}t.push(l);var d=e.all[l]={keyword:l,code:$o[l],implements:o};return d}),e.all.$comment={keyword:"$comment",code:$o.$comment},n.type&&(e.types[n.type]=n)}),e.keywords=as(t.concat(s)),e.custom={},e}});var Mo=W((hh,Lo)=>{"use strict";var No=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Lo.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,n;for(n=1;n<s.length;n++)r=r[s[n]];for(n=0;n<No.length;n++){var l=No[n],o=r[l];o&&(r[l]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var Uo=W((ph,Fo)=>{"use strict";var Vu=Jt().MissingRef;Fo.exports=jo;function jo(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=n(a).then(function(){var o=s._addSchema(a,void 0,e);return o.validate||l(o)});return t&&r.then(function(o){t(null,o)},t),r;function n(o){var f=o.$schema;return f&&!s.getSchema(f)?jo.call(s,{$ref:f},!0):Promise.resolve()}function l(o){try{return s._compile(o)}catch(d){if(d instanceof Vu)return f(d);throw d}function f(d){var h=d.missingSchema;if(c(h))throw new Error("Schema "+h+" is loaded but "+d.missingRef+" cannot be resolved");var m=s._loadingSchemas[h];return m||(m=s._loadingSchemas[h]=s._opts.loadSchema(h),m.then(E,E)),m.then(function(y){if(!c(h))return n(y).then(function(){c(h)||s.addSchema(y,h,void 0,e)})}).then(function(){return l(o)});function E(){delete s._loadingSchemas[h]}function c(y){return s._refs[y]||s._schemas[y]}}}}});var Vo=W((mh,qo)=>{"use strict";qo.exports=function(e,t,s){var r=" ",n=e.level,l=e.dataLevel,o=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m,E="data"+(l||""),c="valid"+n,y="errs__"+n,_=e.opts.$data&&o&&o.$data,v;_?(r+=" var schema"+n+" = "+e.util.getData(o.$data,l,e.dataPathArr)+"; ",v="schema"+n):v=o;var b=this,T="definition"+n,x=b.definition,w="",I,A,V,F,C;if(_&&x.$data){C="keywordValidate"+n;var U=x.validateSchema;r+=" var "+T+" = RULES.custom['"+t+"'].definition; var "+C+" = "+T+".validate;"}else{if(F=e.useCustomRule(b,o,e.schema,e),!F)return;v="validate.schema"+f,C=F.code,I=x.compile,A=x.inline,V=x.macro}var j=C+".errors",L="i"+n,O="ruleErr"+n,$=x.async;if($&&!e.async)throw new Error("async keyword in sync schema");if(A||V||(r+=""+j+" = null;"),r+="var "+y+" = errors;var "+c+";",_&&x.$data&&(w+="}",r+=" if ("+v+" === undefined) { "+c+" = true; } else { ",U&&(w+="}",r+=" "+c+" = "+T+".validateSchema("+v+"); if ("+c+") { ")),A)x.statements?r+=" "+F.validate+" ":r+=" "+c+" = "+F.validate+"; ";else if(V){var M=e.util.copy(e),w="";M.level++;var oe="valid"+M.level;M.schema=F.validate,M.schemaPath="";var J=e.compositeRule;e.compositeRule=M.compositeRule=!0;var X=e.validate(M).replace(/validate\.schema/g,C);e.compositeRule=M.compositeRule=J,r+=" "+X}else{var G=G||[];G.push(r),r="",r+="  "+C+".call( ",e.opts.passContext?r+="this":r+="self",I||x.schema===!1?r+=" , "+E+" ":r+=" , "+v+" , "+E+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var H=l?"data"+(l-1||""):"parentData",fe=l?e.dataPathArr[l]:"parentDataProperty";r+=" , "+H+" , "+fe+" , rootData )  ";var be=r;r=G.pop(),x.errors===!1?(r+=" "+c+" = ",$&&(r+="await "),r+=""+be+"; "):$?(j="customErrors"+n,r+=" var "+j+" = null; try { "+c+" = await "+be+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+j+" = e.errors; else throw e; } "):r+=" "+j+" = null; "+c+" = "+be+"; "}if(x.modifying&&(r+=" if ("+H+") "+E+" = "+H+"["+fe+"];"),r+=""+w,x.valid)h&&(r+=" if (true) { ");else{r+=" if ( ",x.valid===void 0?(r+=" !",V?r+=""+oe:r+=""+c):r+=" "+!x.valid+" ",r+=") { ",m=b.keyword;var G=G||[];G.push(r),r="";var G=G||[];G.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+b.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var we=r;r=G.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+we+"]); ":r+=" validate.errors = ["+we+"]; return false; ":r+=" var err = "+we+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var te=r;r=G.pop(),A?x.errors?x.errors!="full"&&(r+="  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+O+" = vErrors["+L+"]; if ("+O+".dataPath === undefined) "+O+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+O+".schemaPath === undefined) { "+O+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(r+=" "+O+".schema = "+v+"; "+O+".data = "+E+"; "),r+=" } "):x.errors===!1?r+=" "+te+" ":(r+=" if ("+y+" == errors) { "+te+" } else {  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+O+" = vErrors["+L+"]; if ("+O+".dataPath === undefined) "+O+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+O+".schemaPath === undefined) { "+O+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(r+=" "+O+".schema = "+v+"; "+O+".data = "+E+"; "),r+=" } } "):V?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+b.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):x.errors===!1?r+=" "+te+" ":(r+=" if (Array.isArray("+j+")) { if (vErrors === null) vErrors = "+j+"; else vErrors = vErrors.concat("+j+"); errors = vErrors.length;  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+O+" = vErrors["+L+"]; if ("+O+".dataPath === undefined) "+O+".dataPath = (dataPath || '') + "+e.errorPath+";  "+O+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(r+=" "+O+".schema = "+v+"; "+O+".data = "+E+"; "),r+=" } } else { "+te+" } "),r+=" } ",h&&(r+=" else { ")}return r}});var ss=W((vh,Hu)=>{Hu.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Bo=W((gh,zo)=>{"use strict";var Ho=ss();zo.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Ho.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Ho.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var Qo=W((yh,Wo)=>{"use strict";var zu=/^[a-z_$][a-z0-9_$-]*$/i,Bu=Vo(),Wu=Bo();Wo.exports={add:Qu,get:Zu,remove:Ku,validate:ns};function Qu(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!zu.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)l(a,s[r],e);else l(a,s,e);var n=e.metaSchema;n&&(e.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(n,!0))}t.keywords[a]=t.all[a]=!0;function l(o,f,d){for(var h,m=0;m<t.length;m++){var E=t[m];if(E.type==f){h=E;break}}h||(h={type:f,rules:[]},t.push(h));var c={keyword:o,definition:d,custom:!0,code:Bu,implements:d.implements};h.rules.push(c),t.custom[o]=c}return this}function Zu(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Ku(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function ns(a,e){ns.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(Wu,!0);if(t(a))return!0;if(ns.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var Zo=W((_h,Gu)=>{Gu.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var si=W((Eh,ai)=>{"use strict";var Go=wn(),Hr=Gt(),Ju=On(),Jo=za(),Yu=Ga(),Xu=Un(),ed=ko(),Yo=Mo(),Xo=Vr();ai.exports=me;me.prototype.validate=td;me.prototype.compile=ad;me.prototype.addSchema=sd;me.prototype.addMetaSchema=nd;me.prototype.validateSchema=od;me.prototype.getSchema=ld;me.prototype.removeSchema=ud;me.prototype.addFormat=yd;me.prototype.errorsText=gd;me.prototype._addSchema=dd;me.prototype._compile=fd;me.prototype.compileAsync=Uo();var na=Qo();me.prototype.addKeyword=na.add;me.prototype.getKeyword=na.get;me.prototype.removeKeyword=na.remove;me.prototype.validateKeyword=na.validate;var ei=Jt();me.ValidationError=ei.Validation;me.MissingRefError=ei.MissingRef;me.$dataMetaSchema=Yo;var sa="http://json-schema.org/draft-07/schema",Ko=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],rd=["/properties"];function me(a){if(!(this instanceof me))return new me(a);a=this._opts=Xo.copy(a)||{},xd(this),this._schemas={},this._refs={},this._fragments={},this._formats=Xu(a.format),this._cache=a.cache||new Ju,this._loadingSchemas={},this._compilations=[],this.RULES=ed(),this._getId=hd(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=Yu),this._metaOpts=bd(this),a.formats&&Sd(this),a.keywords&&Pd(this),_d(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Ed(this)}function td(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function ad(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function sd(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var n=this._getId(a);if(n!==void 0&&typeof n!="string")throw new Error("schema id must be string");return e=Hr.normalizeId(e||n),ti(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function nd(a,e,t){return this.addSchema(a,e,t,!0),this}function od(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||id(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function id(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(sa)?sa:void 0,a._opts.defaultMeta}function ld(a){var e=ri(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return cd(this,a)}}function cd(a,e){var t=Hr.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,n=t.baseId,l=Go.call(a,s,r,void 0,n);return a._fragments[e]=new Jo({ref:e,fragment:!0,schema:s,root:r,baseId:n,validate:l}),l}}function ri(a,e){return e=Hr.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function ud(a){if(a instanceof RegExp)return aa(this,this._schemas,a),aa(this,this._refs,a),this;switch(typeof a){case"undefined":return aa(this,this._schemas),aa(this,this._refs),this._cache.clear(),this;case"string":var e=ri(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Hr.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function aa(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function dd(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,n=r?r(a):a,l=this._cache.get(n);if(l)return l;s=s||this._opts.addUsedSchema!==!1;var o=Hr.normalizeId(this._getId(a));o&&s&&ti(this,o);var f=this._opts.validateSchema!==!1&&!e,d;f&&!(d=o&&o==Hr.normalizeId(a.$schema))&&this.validateSchema(a,!0);var h=Hr.ids.call(this,a),m=new Jo({id:o,schema:a,localRefs:h,cacheKey:n,meta:t});return o[0]!="#"&&s&&(this._refs[o]=m),this._cache.put(n,m),f&&d&&this.validateSchema(a,!0),m}function fd(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=Go.call(this,a.schema,e,a.localRefs)}catch(n){throw delete a.validate,n}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var n=a.validate,l=n.apply(this,arguments);return r.errors=n.errors,l}}function hd(a){switch(a.schemaId){case"auto":return vd;case"id":return pd;default:return md}}function pd(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function md(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function vd(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function gd(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",n=0;n<a.length;n++){var l=a[n];l&&(r+=s+l.dataPath+" "+l.message+t)}return r.slice(0,-t.length)}function yd(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function _d(a){var e;if(a._opts.$data&&(e=Zo(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=ss();a._opts.$data&&(t=Yo(t,rd)),a.addMetaSchema(t,sa,!0),a._refs["http://json-schema.org/schema"]=sa}}function Ed(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function Sd(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function Pd(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function ti(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function bd(a){for(var e=Xo.copy(a._opts),t=0;t<Ko.length;t++)delete e[Ko[t]];return e}function xd(a){var e=a._opts.logger;if(e===!1)a.logger={log:os,warn:os,error:os};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function os(){}});var Jr=require("fs"),xs=require("path"),Rs=require("os");var Ps="bugfix,feature,refactor,discovery,decision,change",bs="how-it-works,why-it-exists,what-changed,problem-solution,gotcha,pattern,trade-off";var Be=class{static DEFAULTS={CLAUDE_MEM_MODEL:"claude-sonnet-4-5",CLAUDE_MEM_CONTEXT_OBSERVATIONS:"50",CLAUDE_MEM_WORKER_PORT:"37777",CLAUDE_MEM_WORKER_HOST:"127.0.0.1",CLAUDE_MEM_SKIP_TOOLS:"ListMcpResourcesTool,SlashCommand,Skill,TodoWrite,AskUserQuestion",CLAUDE_MEM_PROVIDER:"claude",CLAUDE_MEM_GEMINI_API_KEY:"",CLAUDE_MEM_GEMINI_MODEL:"gemini-2.5-flash-lite",CLAUDE_MEM_GEMINI_RATE_LIMITING_ENABLED:"true",CLAUDE_MEM_OPENROUTER_API_KEY:"",CLAUDE_MEM_OPENROUTER_MODEL:"xiaomi/mimo-v2-flash:free",CLAUDE_MEM_OPENROUTER_SITE_URL:"",CLAUDE_MEM_OPENROUTER_APP_NAME:"claude-mem",CLAUDE_MEM_OPENROUTER_MAX_CONTEXT_MESSAGES:"20",CLAUDE_MEM_OPENROUTER_MAX_TOKENS:"100000",CLAUDE_MEM_DATA_DIR:(0,xs.join)((0,Rs.homedir)(),".claude-mem"),CLAUDE_MEM_LOG_LEVEL:"INFO",CLAUDE_MEM_PYTHON_VERSION:"3.13",CLAUDE_CODE_PATH:"",CLAUDE_MEM_MODE:"code",CLAUDE_MEM_CONTEXT_SHOW_READ_TOKENS:"true",CLAUDE_MEM_CONTEXT_SHOW_WORK_TOKENS:"true",CLAUDE_MEM_CONTEXT_SHOW_SAVINGS_AMOUNT:"true",CLAUDE_MEM_CONTEXT_SHOW_SAVINGS_PERCENT:"true",CLAUDE_MEM_CONTEXT_OBSERVATION_TYPES:Ps,CLAUDE_MEM_CONTEXT_OBSERVATION_CONCEPTS:bs,CLAUDE_MEM_CONTEXT_FULL_COUNT:"5",CLAUDE_MEM_CONTEXT_FULL_FIELD:"narrative",CLAUDE_MEM_CONTEXT_SESSION_COUNT:"10",CLAUDE_MEM_CONTEXT_SHOW_LAST_SUMMARY:"true",CLAUDE_MEM_CONTEXT_SHOW_LAST_MESSAGE:"false"};static getAllDefaults(){return{...this.DEFAULTS}}static get(e){return this.DEFAULTS[e]}static getInt(e){let t=this.get(e);return parseInt(t,10)}static getBool(e){return this.get(e)==="true"}static loadFromFile(e){try{if(!(0,Jr.existsSync)(e))return this.getAllDefaults();let t=(0,Jr.readFileSync)(e,"utf-8"),s=JSON.parse(t),r=s;if(s.env&&typeof s.env=="object"){r=s.env;try{(0,Jr.writeFileSync)(e,JSON.stringify(r,null,2),"utf-8"),pe.info("SETTINGS","Migrated settings file from nested to flat schema",{settingsPath:e})}catch(l){pe.warn("SETTINGS","Failed to auto-migrate settings file",{settingsPath:e},l)}}let n={...this.DEFAULTS};for(let l of Object.keys(this.DEFAULTS))r[l]!==void 0&&(n[l]=r[l]);return n}catch(t){return pe.warn("SETTINGS","Failed to load settings, using defaults",{settingsPath:e},t),this.getAllDefaults()}}};var Yr=require("fs"),Tt=require("path"),ya=(n=>(n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.WARN=2]="WARN",n[n.ERROR=3]="ERROR",n[n.SILENT=4]="SILENT",n))(ya||{}),_a=class{level=null;useColor;logFilePath=null;constructor(){this.useColor=process.stdout.isTTY??!1,this.initializeLogFile()}initializeLogFile(){try{let e=Be.get("CLAUDE_MEM_DATA_DIR"),t=(0,Tt.join)(e,"logs");(0,Yr.existsSync)(t)||(0,Yr.mkdirSync)(t,{recursive:!0});let s=new Date().toISOString().split("T")[0];this.logFilePath=(0,Tt.join)(t,`claude-mem-${s}.log`)}catch(e){console.error("[LOGGER] Failed to initialize log file:",e),this.logFilePath=null}}getLevel(){if(this.level===null)try{let e=Be.get("CLAUDE_MEM_DATA_DIR"),t=(0,Tt.join)(e,"settings.json"),r=Be.loadFromFile(t).CLAUDE_MEM_LOG_LEVEL.toUpperCase();this.level=ya[r]??1}catch(e){console.error("[LOGGER] Failed to load settings, using INFO level:",e),this.level=1}return this.level}correlationId(e,t){return`obs-${e}-${t}`}sessionId(e){return`session-${e}`}formatData(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="object"){if(e instanceof Error)return this.getLevel()===0?`${e.message}
${e.stack}`:e.message;if(Array.isArray(e))return`[${e.length} items]`;let t=Object.keys(e);return t.length===0?"{}":t.length<=3?JSON.stringify(e):`{${t.length} keys: ${t.slice(0,3).join(", ")}...}`}return String(e)}formatTool(e,t){if(!t)return e;let s=typeof t=="string"?JSON.parse(t):t;if(e==="Bash"&&s.command)return`${e}(${s.command})`;if(s.file_path)return`${e}(${s.file_path})`;if(s.notebook_path)return`${e}(${s.notebook_path})`;if(e==="Glob"&&s.pattern)return`${e}(${s.pattern})`;if(e==="Grep"&&s.pattern)return`${e}(${s.pattern})`;if(s.url)return`${e}(${s.url})`;if(s.query)return`${e}(${s.query})`;if(e==="Task"){if(s.subagent_type)return`${e}(${s.subagent_type})`;if(s.description)return`${e}(${s.description})`}return e==="Skill"&&s.skill?`${e}(${s.skill})`:e==="LSP"&&s.operation?`${e}(${s.operation})`:e}formatTimestamp(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0"),f=String(e.getMilliseconds()).padStart(3,"0");return`${t}-${s}-${r} ${n}:${l}:${o}.${f}`}log(e,t,s,r,n){if(e<this.getLevel())return;let l=this.formatTimestamp(new Date),o=ya[e].padEnd(5),f=t.padEnd(6),d="";r?.correlationId?d=`[${r.correlationId}] `:r?.sessionId&&(d=`[session-${r.sessionId}] `);let h="";n!=null&&(n instanceof Error?h=this.getLevel()===0?`
${n.message}
${n.stack}`:` ${n.message}`:this.getLevel()===0&&typeof n=="object"?h=`
`+JSON.stringify(n,null,2):h=" "+this.formatData(n));let m="";if(r){let{sessionId:c,memorySessionId:y,correlationId:_,...v}=r;Object.keys(v).length>0&&(m=` {${Object.entries(v).map(([T,x])=>`${T}=${x}`).join(", ")}}`)}let E=`[${l}] [${o}] [${f}] ${d}${s}${m}${h}`;if(this.logFilePath)try{(0,Yr.appendFileSync)(this.logFilePath,E+`
`,"utf8")}catch(c){process.stderr.write(`[LOGGER] Failed to write to log file: ${c}
`)}else process.stderr.write(E+`
`)}debug(e,t,s,r){this.log(0,e,t,s,r)}info(e,t,s,r){this.log(1,e,t,s,r)}warn(e,t,s,r){this.log(2,e,t,s,r)}error(e,t,s,r){this.log(3,e,t,s,r)}dataIn(e,t,s,r){this.info(e,`\u2192 ${t}`,s,r)}dataOut(e,t,s,r){this.info(e,`\u2190 ${t}`,s,r)}success(e,t,s,r){this.info(e,`\u2713 ${t}`,s,r)}failure(e,t,s,r){this.error(e,`\u2717 ${t}`,s,r)}timing(e,t,s,r){this.info(e,`\u23F1 ${t}`,r,{duration:`${s}ms`})}happyPathError(e,t,s,r,n=""){let d=((new Error().stack||"").split(`
`)[2]||"").match(/at\s+(?:.*\s+)?\(?([^:]+):(\d+):(\d+)\)?/),h=d?`${d[1].split("/").pop()}:${d[2]}`:"unknown",m={...s,location:h};return this.warn(e,`[HAPPY-PATH] ${t}`,m,r),n}},pe=new _a;var i={};Fi(i,{BRAND:()=>fl,DIRTY:()=>wr,EMPTY_PATH:()=>zi,INVALID:()=>z,NEVER:()=>Gl,OK:()=>Re,ParseStatus:()=>Pe,Schema:()=>K,ZodAny:()=>mr,ZodArray:()=>ur,ZodBigInt:()=>Or,ZodBoolean:()=>Ir,ZodBranded:()=>mt,ZodCatch:()=>Ur,ZodDate:()=>Ar,ZodDefault:()=>Fr,ZodDiscriminatedUnion:()=>At,ZodEffects:()=>qe,ZodEnum:()=>Mr,ZodError:()=>Ae,ZodFirstPartyTypeKind:()=>B,ZodFunction:()=>$t,ZodIntersection:()=>kr,ZodIssueCode:()=>R,ZodLazy:()=>Nr,ZodLiteral:()=>Lr,ZodMap:()=>st,ZodNaN:()=>ot,ZodNativeEnum:()=>jr,ZodNever:()=>We,ZodNull:()=>$r,ZodNullable:()=>er,ZodNumber:()=>Tr,ZodObject:()=>Ce,ZodOptional:()=>Fe,ZodParsedType:()=>k,ZodPipeline:()=>vt,ZodPromise:()=>vr,ZodReadonly:()=>qr,ZodRecord:()=>Ct,ZodSchema:()=>K,ZodSet:()=>nt,ZodString:()=>pr,ZodSymbol:()=>tt,ZodTransformer:()=>qe,ZodTuple:()=>Xe,ZodType:()=>K,ZodUndefined:()=>Cr,ZodUnion:()=>Dr,ZodUnknown:()=>cr,ZodVoid:()=>at,addIssueToContext:()=>D,any:()=>Sl,array:()=>Rl,bigint:()=>vl,boolean:()=>Ls,coerce:()=>Kl,custom:()=>Ds,date:()=>gl,datetimeRegex:()=>Cs,defaultErrorMap:()=>ir,discriminatedUnion:()=>Il,effect:()=>ql,enum:()=>jl,function:()=>Nl,getErrorMap:()=>Xr,getParsedType:()=>Ye,instanceof:()=>pl,intersection:()=>Al,isAborted:()=>Ot,isAsync:()=>et,isDirty:()=>It,isValid:()=>hr,late:()=>hl,lazy:()=>Ll,literal:()=>Ml,makeIssue:()=>pt,map:()=>Dl,nan:()=>ml,nativeEnum:()=>Fl,never:()=>bl,null:()=>El,nullable:()=>Hl,number:()=>Ns,object:()=>wl,objectUtil:()=>Ea,oboolean:()=>Zl,onumber:()=>Ql,optional:()=>Vl,ostring:()=>Wl,pipeline:()=>Bl,preprocess:()=>zl,promise:()=>Ul,quotelessJson:()=>qi,record:()=>$l,set:()=>kl,setErrorMap:()=>Hi,strictObject:()=>Tl,string:()=>ks,symbol:()=>yl,transformer:()=>ql,tuple:()=>Cl,undefined:()=>_l,union:()=>Ol,unknown:()=>Pl,util:()=>Y,void:()=>xl});var Y;(function(a){a.assertEqual=r=>{};function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{let n={};for(let l of r)n[l]=l;return n},a.getValidEnumValues=r=>{let n=a.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),l={};for(let o of n)l[o]=r[o];return a.objectValues(l)},a.objectValues=r=>a.objectKeys(r).map(function(n){return r[n]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let n=[];for(let l in r)Object.prototype.hasOwnProperty.call(r,l)&&n.push(l);return n},a.find=(r,n)=>{for(let l of r)if(n(l))return l},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,n=" | "){return r.map(l=>typeof l=="string"?`'${l}'`:l).join(n)}a.joinValues=s,a.jsonStringifyReplacer=(r,n)=>typeof n=="bigint"?n.toString():n})(Y||(Y={}));var Ea;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(Ea||(Ea={}));var k=Y.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ye=a=>{switch(typeof a){case"undefined":return k.undefined;case"string":return k.string;case"number":return Number.isNaN(a)?k.nan:k.number;case"boolean":return k.boolean;case"function":return k.function;case"bigint":return k.bigint;case"symbol":return k.symbol;case"object":return Array.isArray(a)?k.array:a===null?k.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?k.promise:typeof Map<"u"&&a instanceof Map?k.map:typeof Set<"u"&&a instanceof Set?k.set:typeof Date<"u"&&a instanceof Date?k.date:k.object;default:return k.unknown}};var R=Y.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),qi=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:"),Ae=class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(n){return n.message},s={_errors:[]},r=n=>{for(let l of n.issues)if(l.code==="invalid_union")l.unionErrors.map(r);else if(l.code==="invalid_return_type")r(l.returnTypeError);else if(l.code==="invalid_arguments")r(l.argumentsError);else if(l.path.length===0)s._errors.push(t(l));else{let o=s,f=0;for(;f<l.path.length;){let d=l.path[f];f===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(l))):o[d]=o[d]||{_errors:[]},o=o[d],f++}}};return r(this),s}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Y.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let r of this.issues)if(r.path.length>0){let n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};Ae.create=a=>new Ae(a);var Vi=(a,e)=>{let t;switch(a.code){case R.invalid_type:a.received===k.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case R.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,Y.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:t=`Unrecognized key(s) in object: ${Y.joinValues(a.keys,", ")}`;break;case R.invalid_union:t="Invalid input";break;case R.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Y.joinValues(a.options)}`;break;case R.invalid_enum_value:t=`Invalid enum value. Expected ${Y.joinValues(a.options)}, received '${a.received}'`;break;case R.invalid_arguments:t="Invalid function arguments";break;case R.invalid_return_type:t="Invalid function return type";break;case R.invalid_date:t="Invalid date";break;case R.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:Y.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case R.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case R.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case R.custom:t="Invalid input";break;case R.invalid_intersection_types:t="Intersection results could not be merged";break;case R.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case R.not_finite:t="Number must be finite";break;default:t=e.defaultError,Y.assertNever(a)}return{message:t}},ir=Vi;var ws=ir;function Hi(a){ws=a}function Xr(){return ws}var pt=a=>{let{data:e,path:t,errorMaps:s,issueData:r}=a,n=[...t,...r.path||[]],l={...r,path:n};if(r.message!==void 0)return{...r,path:n,message:r.message};let o="",f=s.filter(d=>!!d).slice().reverse();for(let d of f)o=d(l,{data:e,defaultError:o}).message;return{...r,path:n,message:o}},zi=[];function D(a,e){let t=Xr(),s=pt({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===ir?void 0:ir].filter(r=>!!r)});a.common.issues.push(s)}var Pe=class a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if(r.status==="aborted")return z;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let r of t){let n=await r.key,l=await r.value;s.push({key:n,value:l})}return a.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:n,value:l}=r;if(n.status==="aborted"||l.status==="aborted")return z;n.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof l.value<"u"||r.alwaysSet)&&(s[n.value]=l.value)}return{status:e.value,value:s}}},z=Object.freeze({status:"aborted"}),wr=a=>({status:"dirty",value:a}),Re=a=>({status:"valid",value:a}),Ot=a=>a.status==="aborted",It=a=>a.status==="dirty",hr=a=>a.status==="valid",et=a=>typeof Promise<"u"&&a instanceof Promise;var q;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(q||(q={}));var Ue=class{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ts=(a,e)=>{if(hr(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Ae(a.common.issues);return this._error=t,this._error}}};function Q(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(l,o)=>{let{message:f}=a;return l.code==="invalid_enum_value"?{message:f??o.defaultError}:typeof o.data>"u"?{message:f??s??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:f??t??o.defaultError}},description:r}}var K=class{get description(){return this._def.description}_getType(e){return Ye(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Pe,ctx:{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(et(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){let s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Ts(s,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:t});return hr(s)?{value:s.value}:{issues:t.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>hr(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},r=this._parse({data:e,path:s.path,parent:s}),n=await(et(r)?r:Promise.resolve(r));return Ts(s,n)}refine(e,t){let s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,n)=>{let l=e(r),o=()=>n.addIssue({code:R.custom,...s(r)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new qe({schema:this,typeName:B.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Fe.create(this,this._def)}nullable(){return er.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ur.create(this)}promise(){return vr.create(this,this._def)}or(e){return Dr.create([this,e],this._def)}and(e){return kr.create(this,e,this._def)}transform(e){return new qe({...Q(this._def),schema:this,typeName:B.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Fr({...Q(this._def),innerType:this,defaultValue:t,typeName:B.ZodDefault})}brand(){return new mt({typeName:B.ZodBranded,type:this,...Q(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Ur({...Q(this._def),innerType:this,catchValue:t,typeName:B.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return vt.create(this,e)}readonly(){return qr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Bi=/^c[^\s-]{8,}$/i,Wi=/^[0-9a-z]+$/,Qi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Zi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ki=/^[a-z0-9_-]{21}$/i,Gi=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ji=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Yi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Sa,el=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tl=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,al=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sl=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nl=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Is="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ol=new RegExp(`^${Is}$`);function As(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function il(a){return new RegExp(`^${As(a)}$`)}function Cs(a){let e=`${Is}T${As(a)}`,t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ll(a,e){return!!((e==="v4"||!e)&&el.test(a)||(e==="v6"||!e)&&tl.test(a))}function cl(a,e){if(!Gi.test(a))return!1;try{let[t]=a.split(".");if(!t)return!1;let s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function ul(a,e){return!!((e==="v4"||!e)&&rl.test(a)||(e==="v6"||!e)&&al.test(a))}var pr=class a extends K{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==k.string){let n=this._getOrReturnCtx(e);return D(n,{code:R.invalid_type,expected:k.string,received:n.parsedType}),z}let s=new Pe,r;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),D(r,{code:R.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),D(r,{code:R.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){let l=e.data.length>n.value,o=e.data.length<n.value;(l||o)&&(r=this._getOrReturnCtx(e,r),l?D(r,{code:R.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&D(r,{code:R.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")Yi.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"email",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")Sa||(Sa=new RegExp(Xi,"u")),Sa.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"emoji",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")Zi.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"uuid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="nanoid")Ki.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"nanoid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")Bi.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"cuid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")Wi.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"cuid2",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")Qi.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"ulid",code:R.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),D(r,{validation:"url",code:R.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"regex",code:R.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),D(r,{code:R.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),D(r,{code:R.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),D(r,{code:R.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Cs(n).test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{code:R.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="date"?ol.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{code:R.invalid_string,validation:"date",message:n.message}),s.dirty()):n.kind==="time"?il(n).test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{code:R.invalid_string,validation:"time",message:n.message}),s.dirty()):n.kind==="duration"?Ji.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"duration",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="ip"?ll(e.data,n.version)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"ip",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="jwt"?cl(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"jwt",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="cidr"?ul(e.data,n.version)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"cidr",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="base64"?sl.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"base64",code:R.invalid_string,message:n.message}),s.dirty()):n.kind==="base64url"?nl.test(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{validation:"base64url",code:R.invalid_string,message:n.message}),s.dirty()):Y.assertNever(n);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:R.invalid_string,...q.errToObj(s)})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...q.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...q.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...q.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...q.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...q.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...q.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...q.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...q.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...q.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...q.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...q.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...q.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...q.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...q.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...q.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...q.errToObj(t)})}nonempty(e){return this.min(1,q.errToObj(e))}trim(){return new a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};pr.create=a=>new pr({checks:[],typeName:B.ZodString,coerce:a?.coerce??!1,...Q(a)});function dl(a,e){let t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,n=Number.parseInt(a.toFixed(r).replace(".","")),l=Number.parseInt(e.toFixed(r).replace(".",""));return n%l/10**r}var Tr=class a extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==k.number){let n=this._getOrReturnCtx(e);return D(n,{code:R.invalid_type,expected:k.number,received:n.parsedType}),z}let s,r=new Pe;for(let n of this._def.checks)n.kind==="int"?Y.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:R.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:R.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:R.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):n.kind==="multipleOf"?dl(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),D(s,{code:R.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:R.not_finite,message:n.message}),r.dirty()):Y.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,q.toString(t))}gt(e,t){return this.setLimit("min",e,!1,q.toString(t))}lte(e,t){return this.setLimit("max",e,!0,q.toString(t))}lt(e,t){return this.setLimit("max",e,!1,q.toString(t))}setLimit(e,t,s,r){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:q.toString(r)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:q.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:q.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Y.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Tr.create=a=>new Tr({checks:[],typeName:B.ZodNumber,coerce:a?.coerce||!1,...Q(a)});var Or=class a extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==k.bigint)return this._getInvalidInput(e);let s,r=new Pe;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:R.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),D(s,{code:R.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),D(s,{code:R.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):Y.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return D(t,{code:R.invalid_type,expected:k.bigint,received:t.parsedType}),z}gte(e,t){return this.setLimit("min",e,!0,q.toString(t))}gt(e,t){return this.setLimit("min",e,!1,q.toString(t))}lte(e,t){return this.setLimit("max",e,!0,q.toString(t))}lt(e,t){return this.setLimit("max",e,!1,q.toString(t))}setLimit(e,t,s,r){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:q.toString(r)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:q.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Or.create=a=>new Or({checks:[],typeName:B.ZodBigInt,coerce:a?.coerce??!1,...Q(a)});var Ir=class extends K{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==k.boolean){let s=this._getOrReturnCtx(e);return D(s,{code:R.invalid_type,expected:k.boolean,received:s.parsedType}),z}return Re(e.data)}};Ir.create=a=>new Ir({typeName:B.ZodBoolean,coerce:a?.coerce||!1,...Q(a)});var Ar=class a extends K{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==k.date){let n=this._getOrReturnCtx(e);return D(n,{code:R.invalid_type,expected:k.date,received:n.parsedType}),z}if(Number.isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return D(n,{code:R.invalid_date}),z}let s=new Pe,r;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),D(r,{code:R.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),D(r,{code:R.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):Y.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:q.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:q.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Ar.create=a=>new Ar({checks:[],coerce:a?.coerce||!1,typeName:B.ZodDate,...Q(a)});var tt=class extends K{_parse(e){if(this._getType(e)!==k.symbol){let s=this._getOrReturnCtx(e);return D(s,{code:R.invalid_type,expected:k.symbol,received:s.parsedType}),z}return Re(e.data)}};tt.create=a=>new tt({typeName:B.ZodSymbol,...Q(a)});var Cr=class extends K{_parse(e){if(this._getType(e)!==k.undefined){let s=this._getOrReturnCtx(e);return D(s,{code:R.invalid_type,expected:k.undefined,received:s.parsedType}),z}return Re(e.data)}};Cr.create=a=>new Cr({typeName:B.ZodUndefined,...Q(a)});var $r=class extends K{_parse(e){if(this._getType(e)!==k.null){let s=this._getOrReturnCtx(e);return D(s,{code:R.invalid_type,expected:k.null,received:s.parsedType}),z}return Re(e.data)}};$r.create=a=>new $r({typeName:B.ZodNull,...Q(a)});var mr=class extends K{constructor(){super(...arguments),this._any=!0}_parse(e){return Re(e.data)}};mr.create=a=>new mr({typeName:B.ZodAny,...Q(a)});var cr=class extends K{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Re(e.data)}};cr.create=a=>new cr({typeName:B.ZodUnknown,...Q(a)});var We=class extends K{_parse(e){let t=this._getOrReturnCtx(e);return D(t,{code:R.invalid_type,expected:k.never,received:t.parsedType}),z}};We.create=a=>new We({typeName:B.ZodNever,...Q(a)});var at=class extends K{_parse(e){if(this._getType(e)!==k.undefined){let s=this._getOrReturnCtx(e);return D(s,{code:R.invalid_type,expected:k.void,received:s.parsedType}),z}return Re(e.data)}};at.create=a=>new at({typeName:B.ZodVoid,...Q(a)});var ur=class a extends K{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==k.array)return D(t,{code:R.invalid_type,expected:k.array,received:t.parsedType}),z;if(r.exactLength!==null){let l=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(l||o)&&(D(t,{code:l?R.too_big:R.too_small,minimum:o?r.exactLength.value:void 0,maximum:l?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(D(t,{code:R.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(D(t,{code:R.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((l,o)=>r.type._parseAsync(new Ue(t,l,t.path,o)))).then(l=>Pe.mergeArray(s,l));let n=[...t.data].map((l,o)=>r.type._parseSync(new Ue(t,l,t.path,o)));return Pe.mergeArray(s,n)}get element(){return this._def.type}min(e,t){return new a({...this._def,minLength:{value:e,message:q.toString(t)}})}max(e,t){return new a({...this._def,maxLength:{value:e,message:q.toString(t)}})}length(e,t){return new a({...this._def,exactLength:{value:e,message:q.toString(t)}})}nonempty(e){return this.min(1,e)}};ur.create=(a,e)=>new ur({type:a,minLength:null,maxLength:null,exactLength:null,typeName:B.ZodArray,...Q(e)});function rt(a){if(a instanceof Ce){let e={};for(let t in a.shape){let s=a.shape[t];e[t]=Fe.create(rt(s))}return new Ce({...a._def,shape:()=>e})}else return a instanceof ur?new ur({...a._def,type:rt(a.element)}):a instanceof Fe?Fe.create(rt(a.unwrap())):a instanceof er?er.create(rt(a.unwrap())):a instanceof Xe?Xe.create(a.items.map(e=>rt(e))):a}var Ce=class a extends K{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=Y.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==k.object){let d=this._getOrReturnCtx(e);return D(d,{code:R.invalid_type,expected:k.object,received:d.parsedType}),z}let{status:s,ctx:r}=this._processInputParams(e),{shape:n,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof We&&this._def.unknownKeys==="strip"))for(let d in r.data)l.includes(d)||o.push(d);let f=[];for(let d of l){let h=n[d],m=r.data[d];f.push({key:{status:"valid",value:d},value:h._parse(new Ue(r,m,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof We){let d=this._def.unknownKeys;if(d==="passthrough")for(let h of o)f.push({key:{status:"valid",value:h},value:{status:"valid",value:r.data[h]}});else if(d==="strict")o.length>0&&(D(r,{code:R.unrecognized_keys,keys:o}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let h of o){let m=r.data[h];f.push({key:{status:"valid",value:h},value:d._parse(new Ue(r,m,r.path,h)),alwaysSet:h in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let d=[];for(let h of f){let m=await h.key,E=await h.value;d.push({key:m,value:E,alwaysSet:h.alwaysSet})}return d}).then(d=>Pe.mergeObjectSync(s,d)):Pe.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return q.errToObj,new a({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:q.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new a({...this._def,unknownKeys:"strip"})}passthrough(){return new a({...this._def,unknownKeys:"passthrough"})}extend(e){return new a({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new a({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:B.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new a({...this._def,catchall:e})}pick(e){let t={};for(let s of Y.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new a({...this._def,shape:()=>t})}omit(e){let t={};for(let s of Y.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new a({...this._def,shape:()=>t})}deepPartial(){return rt(this)}partial(e){let t={};for(let s of Y.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new a({...this._def,shape:()=>t})}required(e){let t={};for(let s of Y.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof Fe;)n=n._def.innerType;t[s]=n}return new a({...this._def,shape:()=>t})}keyof(){return $s(Y.objectKeys(this.shape))}};Ce.create=(a,e)=>new Ce({shape:()=>a,unknownKeys:"strip",catchall:We.create(),typeName:B.ZodObject,...Q(e)});Ce.strictCreate=(a,e)=>new Ce({shape:()=>a,unknownKeys:"strict",catchall:We.create(),typeName:B.ZodObject,...Q(e)});Ce.lazycreate=(a,e)=>new Ce({shape:a,unknownKeys:"strip",catchall:We.create(),typeName:B.ZodObject,...Q(e)});var Dr=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;function r(n){for(let o of n)if(o.result.status==="valid")return o.result;for(let o of n)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;let l=n.map(o=>new Ae(o.ctx.common.issues));return D(t,{code:R.invalid_union,unionErrors:l}),z}if(t.common.async)return Promise.all(s.map(async n=>{let l={...t,common:{...t.common,issues:[]},parent:null};return{result:await n._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(r);{let n,l=[];for(let f of s){let d={...t,common:{...t.common,issues:[]},parent:null},h=f._parseSync({data:t.data,path:t.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!n&&(n={result:h,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(n)return t.common.issues.push(...n.ctx.common.issues),n.result;let o=l.map(f=>new Ae(f));return D(t,{code:R.invalid_union,unionErrors:o}),z}}get options(){return this._def.options}};Dr.create=(a,e)=>new Dr({options:a,typeName:B.ZodUnion,...Q(e)});var lr=a=>a instanceof Nr?lr(a.schema):a instanceof qe?lr(a.innerType()):a instanceof Lr?[a.value]:a instanceof Mr?a.options:a instanceof jr?Y.objectValues(a.enum):a instanceof Fr?lr(a._def.innerType):a instanceof Cr?[void 0]:a instanceof $r?[null]:a instanceof Fe?[void 0,...lr(a.unwrap())]:a instanceof er?[null,...lr(a.unwrap())]:a instanceof mt||a instanceof qr?lr(a.unwrap()):a instanceof Ur?lr(a._def.innerType):[],At=class a extends K{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==k.object)return D(t,{code:R.invalid_type,expected:k.object,received:t.parsedType}),z;let s=this.discriminator,r=t.data[s],n=this.optionsMap.get(r);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(D(t,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let n of t){let l=lr(n.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of l){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,n)}}return new a({typeName:B.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Q(s)})}};function Pa(a,e){let t=Ye(a),s=Ye(e);if(a===e)return{valid:!0,data:a};if(t===k.object&&s===k.object){let r=Y.objectKeys(e),n=Y.objectKeys(a).filter(o=>r.indexOf(o)!==-1),l={...a,...e};for(let o of n){let f=Pa(a[o],e[o]);if(!f.valid)return{valid:!1};l[o]=f.data}return{valid:!0,data:l}}else if(t===k.array&&s===k.array){if(a.length!==e.length)return{valid:!1};let r=[];for(let n=0;n<a.length;n++){let l=a[n],o=e[n],f=Pa(l,o);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return t===k.date&&s===k.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var kr=class extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=(n,l)=>{if(Ot(n)||Ot(l))return z;let o=Pa(n.value,l.value);return o.valid?((It(n)||It(l))&&t.dirty(),{status:t.value,value:o.data}):(D(s,{code:R.invalid_intersection_types}),z)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,l])=>r(n,l)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};kr.create=(a,e,t)=>new kr({left:a,right:e,typeName:B.ZodIntersection,...Q(t)});var Xe=class a extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.array)return D(s,{code:R.invalid_type,expected:k.array,received:s.parsedType}),z;if(s.data.length<this._def.items.length)return D(s,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),z;!this._def.rest&&s.data.length>this._def.items.length&&(D(s,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...s.data].map((l,o)=>{let f=this._def.items[o]||this._def.rest;return f?f._parse(new Ue(s,l,s.path,o)):null}).filter(l=>!!l);return s.common.async?Promise.all(n).then(l=>Pe.mergeArray(t,l)):Pe.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new a({...this._def,rest:e})}};Xe.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xe({items:a,typeName:B.ZodTuple,rest:null,...Q(e)})};var Ct=class a extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.object)return D(s,{code:R.invalid_type,expected:k.object,received:s.parsedType}),z;let r=[],n=this._def.keyType,l=this._def.valueType;for(let o in s.data)r.push({key:n._parse(new Ue(s,o,s.path,o)),value:l._parse(new Ue(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?Pe.mergeObjectAsync(t,r):Pe.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof K?new a({keyType:e,valueType:t,typeName:B.ZodRecord,...Q(s)}):new a({keyType:pr.create(),valueType:e,typeName:B.ZodRecord,...Q(t)})}},st=class extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.map)return D(s,{code:R.invalid_type,expected:k.map,received:s.parsedType}),z;let r=this._def.keyType,n=this._def.valueType,l=[...s.data.entries()].map(([o,f],d)=>({key:r._parse(new Ue(s,o,s.path,[d,"key"])),value:n._parse(new Ue(s,f,s.path,[d,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let f of l){let d=await f.key,h=await f.value;if(d.status==="aborted"||h.status==="aborted")return z;(d.status==="dirty"||h.status==="dirty")&&t.dirty(),o.set(d.value,h.value)}return{status:t.value,value:o}})}else{let o=new Map;for(let f of l){let d=f.key,h=f.value;if(d.status==="aborted"||h.status==="aborted")return z;(d.status==="dirty"||h.status==="dirty")&&t.dirty(),o.set(d.value,h.value)}return{status:t.value,value:o}}}};st.create=(a,e,t)=>new st({valueType:e,keyType:a,typeName:B.ZodMap,...Q(t)});var nt=class a extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==k.set)return D(s,{code:R.invalid_type,expected:k.set,received:s.parsedType}),z;let r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(D(s,{code:R.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(D(s,{code:R.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let n=this._def.valueType;function l(f){let d=new Set;for(let h of f){if(h.status==="aborted")return z;h.status==="dirty"&&t.dirty(),d.add(h.value)}return{status:t.value,value:d}}let o=[...s.data.values()].map((f,d)=>n._parse(new Ue(s,f,s.path,d)));return s.common.async?Promise.all(o).then(f=>l(f)):l(o)}min(e,t){return new a({...this._def,minSize:{value:e,message:q.toString(t)}})}max(e,t){return new a({...this._def,maxSize:{value:e,message:q.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};nt.create=(a,e)=>new nt({valueType:a,minSize:null,maxSize:null,typeName:B.ZodSet,...Q(e)});var $t=class a extends K{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==k.function)return D(t,{code:R.invalid_type,expected:k.function,received:t.parsedType}),z;function s(o,f){return pt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Xr(),ir].filter(d=>!!d),issueData:{code:R.invalid_arguments,argumentsError:f}})}function r(o,f){return pt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Xr(),ir].filter(d=>!!d),issueData:{code:R.invalid_return_type,returnTypeError:f}})}let n={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof vr){let o=this;return Re(async function(...f){let d=new Ae([]),h=await o._def.args.parseAsync(f,n).catch(c=>{throw d.addIssue(s(f,c)),d}),m=await Reflect.apply(l,this,h);return await o._def.returns._def.type.parseAsync(m,n).catch(c=>{throw d.addIssue(r(m,c)),d})})}else{let o=this;return Re(function(...f){let d=o._def.args.safeParse(f,n);if(!d.success)throw new Ae([s(f,d.error)]);let h=Reflect.apply(l,this,d.data),m=o._def.returns.safeParse(h,n);if(!m.success)throw new Ae([r(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a({...this._def,args:Xe.create(e).rest(cr.create())})}returns(e){return new a({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new a({args:e||Xe.create([]).rest(cr.create()),returns:t||cr.create(),typeName:B.ZodFunction,...Q(s)})}},Nr=class extends K{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Nr.create=(a,e)=>new Nr({getter:a,typeName:B.ZodLazy,...Q(e)});var Lr=class extends K{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return D(t,{received:t.data,code:R.invalid_literal,expected:this._def.value}),z}return{status:"valid",value:e.data}}get value(){return this._def.value}};Lr.create=(a,e)=>new Lr({value:a,typeName:B.ZodLiteral,...Q(e)});function $s(a,e){return new Mr({values:a,typeName:B.ZodEnum,...Q(e)})}var Mr=class a extends K{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return D(t,{expected:Y.joinValues(s),received:t.parsedType,code:R.invalid_type}),z}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return D(t,{received:t.data,code:R.invalid_enum_value,options:s}),z}return Re(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return a.create(e,{...this._def,...t})}exclude(e,t=this._def){return a.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};Mr.create=$s;var jr=class extends K{_parse(e){let t=Y.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==k.string&&s.parsedType!==k.number){let r=Y.objectValues(t);return D(s,{expected:Y.joinValues(r),received:s.parsedType,code:R.invalid_type}),z}if(this._cache||(this._cache=new Set(Y.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let r=Y.objectValues(t);return D(s,{received:s.data,code:R.invalid_enum_value,options:r}),z}return Re(e.data)}get enum(){return this._def.values}};jr.create=(a,e)=>new jr({values:a,typeName:B.ZodNativeEnum,...Q(e)});var vr=class extends K{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==k.promise&&t.common.async===!1)return D(t,{code:R.invalid_type,expected:k.promise,received:t.parsedType}),z;let s=t.parsedType===k.promise?t.data:Promise.resolve(t.data);return Re(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}};vr.create=(a,e)=>new vr({type:a,typeName:B.ZodPromise,...Q(e)});var qe=class extends K{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:l=>{D(s,l),l.fatal?t.abort():t.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),r.type==="preprocess"){let l=r.transform(s.data,n);if(s.common.async)return Promise.resolve(l).then(async o=>{if(t.value==="aborted")return z;let f=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return f.status==="aborted"?z:f.status==="dirty"?wr(f.value):t.value==="dirty"?wr(f.value):f});{if(t.value==="aborted")return z;let o=this._def.schema._parseSync({data:l,path:s.path,parent:s});return o.status==="aborted"?z:o.status==="dirty"?wr(o.value):t.value==="dirty"?wr(o.value):o}}if(r.type==="refinement"){let l=o=>{let f=r.refinement(o,n);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?z:(o.status==="dirty"&&t.dirty(),l(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?z:(o.status==="dirty"&&t.dirty(),l(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(s.common.async===!1){let l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!hr(l))return z;let o=r.transform(l.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>hr(l)?Promise.resolve(r.transform(l.value,n)).then(o=>({status:t.value,value:o})):z);Y.assertNever(r)}};qe.create=(a,e,t)=>new qe({schema:a,typeName:B.ZodEffects,effect:e,...Q(t)});qe.createWithPreprocess=(a,e,t)=>new qe({schema:e,effect:{type:"preprocess",transform:a},typeName:B.ZodEffects,...Q(t)});var Fe=class extends K{_parse(e){return this._getType(e)===k.undefined?Re(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Fe.create=(a,e)=>new Fe({innerType:a,typeName:B.ZodOptional,...Q(e)});var er=class extends K{_parse(e){return this._getType(e)===k.null?Re(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};er.create=(a,e)=>new er({innerType:a,typeName:B.ZodNullable,...Q(e)});var Fr=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===k.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Fr.create=(a,e)=>new Fr({innerType:a,typeName:B.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Q(e)});var Ur=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return et(r)?r.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ae(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ae(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Ur.create=(a,e)=>new Ur({innerType:a,typeName:B.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Q(e)});var ot=class extends K{_parse(e){if(this._getType(e)!==k.nan){let s=this._getOrReturnCtx(e);return D(s,{code:R.invalid_type,expected:k.nan,received:s.parsedType}),z}return{status:"valid",value:e.data}}};ot.create=a=>new ot({typeName:B.ZodNaN,...Q(a)});var fl=Symbol("zod_brand"),mt=class extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}},vt=class a extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?z:n.status==="dirty"?(t.dirty(),wr(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?z:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new a({in:e,out:t,typeName:B.ZodPipeline})}},qr=class extends K{_parse(e){let t=this._def.innerType._parse(e),s=r=>(hr(r)&&(r.value=Object.freeze(r.value)),r);return et(t)?t.then(r=>s(r)):s(t)}unwrap(){return this._def.innerType}};qr.create=(a,e)=>new qr({innerType:a,typeName:B.ZodReadonly,...Q(e)});function Os(a,e){let t=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof t=="string"?{message:t}:t}function Ds(a,e={},t){return a?mr.create().superRefine((s,r)=>{let n=a(s);if(n instanceof Promise)return n.then(l=>{if(!l){let o=Os(e,s),f=o.fatal??t??!0;r.addIssue({code:"custom",...o,fatal:f})}});if(!n){let l=Os(e,s),o=l.fatal??t??!0;r.addIssue({code:"custom",...l,fatal:o})}}):mr.create()}var hl={object:Ce.lazycreate},B;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(B||(B={}));var pl=(a,e={message:`Input not instance of ${a.name}`})=>Ds(t=>t instanceof a,e),ks=pr.create,Ns=Tr.create,ml=ot.create,vl=Or.create,Ls=Ir.create,gl=Ar.create,yl=tt.create,_l=Cr.create,El=$r.create,Sl=mr.create,Pl=cr.create,bl=We.create,xl=at.create,Rl=ur.create,wl=Ce.create,Tl=Ce.strictCreate,Ol=Dr.create,Il=At.create,Al=kr.create,Cl=Xe.create,$l=Ct.create,Dl=st.create,kl=nt.create,Nl=$t.create,Ll=Nr.create,Ml=Lr.create,jl=Mr.create,Fl=jr.create,Ul=vr.create,ql=qe.create,Vl=Fe.create,Hl=er.create,zl=qe.createWithPreprocess,Bl=vt.create,Wl=()=>ks().optional(),Ql=()=>Ns().optional(),Zl=()=>Ls().optional(),Kl={string:(a=>pr.create({...a,coerce:!0})),number:(a=>Tr.create({...a,coerce:!0})),boolean:(a=>Ir.create({...a,coerce:!0})),bigint:(a=>Or.create({...a,coerce:!0})),date:(a=>Ar.create({...a,coerce:!0}))};var Gl=z;var ba="2025-06-18";var Ms=[ba,"2025-03-26","2024-11-05","2024-10-07"],Dt="2.0",js=i.union([i.string(),i.number().int()]),Fs=i.string(),Jl=i.object({progressToken:i.optional(js)}).passthrough(),Ve=i.object({_meta:i.optional(Jl)}).passthrough(),$e=i.object({method:i.string(),params:i.optional(Ve)}),gt=i.object({_meta:i.optional(i.object({}).passthrough())}).passthrough(),rr=i.object({method:i.string(),params:i.optional(gt)}),He=i.object({_meta:i.optional(i.object({}).passthrough())}).passthrough(),kt=i.union([i.string(),i.number().int()]),Us=i.object({jsonrpc:i.literal(Dt),id:kt}).merge($e).strict(),qs=a=>Us.safeParse(a).success,Vs=i.object({jsonrpc:i.literal(Dt)}).merge(rr).strict(),Hs=a=>Vs.safeParse(a).success,zs=i.object({jsonrpc:i.literal(Dt),id:kt,result:He}).strict(),xa=a=>zs.safeParse(a).success,Qe;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(Qe||(Qe={}));var Bs=i.object({jsonrpc:i.literal(Dt),id:kt,error:i.object({code:i.number().int(),message:i.string(),data:i.optional(i.unknown())})}).strict(),Ws=a=>Bs.safeParse(a).success,Qs=i.union([Us,Vs,zs,Bs]),Nt=He.strict(),Lt=rr.extend({method:i.literal("notifications/cancelled"),params:gt.extend({requestId:kt,reason:i.string().optional()})}),Yl=i.object({src:i.string(),mimeType:i.optional(i.string()),sizes:i.optional(i.array(i.string()))}).passthrough(),yt=i.object({icons:i.array(Yl).optional()}).passthrough(),_t=i.object({name:i.string(),title:i.optional(i.string())}).passthrough(),Zs=_t.extend({version:i.string(),websiteUrl:i.optional(i.string())}).merge(yt),Xl=i.object({experimental:i.optional(i.object({}).passthrough()),sampling:i.optional(i.object({}).passthrough()),elicitation:i.optional(i.object({}).passthrough()),roots:i.optional(i.object({listChanged:i.optional(i.boolean())}).passthrough())}).passthrough(),Ra=$e.extend({method:i.literal("initialize"),params:Ve.extend({protocolVersion:i.string(),capabilities:Xl,clientInfo:Zs})});var ec=i.object({experimental:i.optional(i.object({}).passthrough()),logging:i.optional(i.object({}).passthrough()),completions:i.optional(i.object({}).passthrough()),prompts:i.optional(i.object({listChanged:i.optional(i.boolean())}).passthrough()),resources:i.optional(i.object({subscribe:i.optional(i.boolean()),listChanged:i.optional(i.boolean())}).passthrough()),tools:i.optional(i.object({listChanged:i.optional(i.boolean())}).passthrough())}).passthrough(),rc=He.extend({protocolVersion:i.string(),capabilities:ec,serverInfo:Zs,instructions:i.optional(i.string())}),wa=rr.extend({method:i.literal("notifications/initialized")});var Mt=$e.extend({method:i.literal("ping")}),tc=i.object({progress:i.number(),total:i.optional(i.number()),message:i.optional(i.string())}).passthrough(),jt=rr.extend({method:i.literal("notifications/progress"),params:gt.merge(tc).extend({progressToken:js})}),Ft=$e.extend({params:Ve.extend({cursor:i.optional(Fs)}).optional()}),Ut=He.extend({nextCursor:i.optional(Fs)}),Ks=i.object({uri:i.string(),mimeType:i.optional(i.string()),_meta:i.optional(i.object({}).passthrough())}).passthrough(),Gs=Ks.extend({text:i.string()}),Ta=i.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),Js=Ks.extend({blob:Ta}),Ys=_t.extend({uri:i.string(),description:i.optional(i.string()),mimeType:i.optional(i.string()),_meta:i.optional(i.object({}).passthrough())}).merge(yt),ac=_t.extend({uriTemplate:i.string(),description:i.optional(i.string()),mimeType:i.optional(i.string()),_meta:i.optional(i.object({}).passthrough())}).merge(yt),sc=Ft.extend({method:i.literal("resources/list")}),nc=Ut.extend({resources:i.array(Ys)}),oc=Ft.extend({method:i.literal("resources/templates/list")}),ic=Ut.extend({resourceTemplates:i.array(ac)}),lc=$e.extend({method:i.literal("resources/read"),params:Ve.extend({uri:i.string()})}),cc=He.extend({contents:i.array(i.union([Gs,Js]))}),uc=rr.extend({method:i.literal("notifications/resources/list_changed")}),dc=$e.extend({method:i.literal("resources/subscribe"),params:Ve.extend({uri:i.string()})}),fc=$e.extend({method:i.literal("resources/unsubscribe"),params:Ve.extend({uri:i.string()})}),hc=rr.extend({method:i.literal("notifications/resources/updated"),params:gt.extend({uri:i.string()})}),pc=i.object({name:i.string(),description:i.optional(i.string()),required:i.optional(i.boolean())}).passthrough(),mc=_t.extend({description:i.optional(i.string()),arguments:i.optional(i.array(pc)),_meta:i.optional(i.object({}).passthrough())}).merge(yt),vc=Ft.extend({method:i.literal("prompts/list")}),gc=Ut.extend({prompts:i.array(mc)}),yc=$e.extend({method:i.literal("prompts/get"),params:Ve.extend({name:i.string(),arguments:i.optional(i.record(i.string()))})}),Oa=i.object({type:i.literal("text"),text:i.string(),_meta:i.optional(i.object({}).passthrough())}).passthrough(),Ia=i.object({type:i.literal("image"),data:Ta,mimeType:i.string(),_meta:i.optional(i.object({}).passthrough())}).passthrough(),Aa=i.object({type:i.literal("audio"),data:Ta,mimeType:i.string(),_meta:i.optional(i.object({}).passthrough())}).passthrough(),_c=i.object({type:i.literal("resource"),resource:i.union([Gs,Js]),_meta:i.optional(i.object({}).passthrough())}).passthrough(),Ec=Ys.extend({type:i.literal("resource_link")}),Xs=i.union([Oa,Ia,Aa,Ec,_c]),Sc=i.object({role:i.enum(["user","assistant"]),content:Xs}).passthrough(),Pc=He.extend({description:i.optional(i.string()),messages:i.array(Sc)}),bc=rr.extend({method:i.literal("notifications/prompts/list_changed")}),xc=i.object({title:i.optional(i.string()),readOnlyHint:i.optional(i.boolean()),destructiveHint:i.optional(i.boolean()),idempotentHint:i.optional(i.boolean()),openWorldHint:i.optional(i.boolean())}).passthrough(),Rc=_t.extend({description:i.optional(i.string()),inputSchema:i.object({type:i.literal("object"),properties:i.optional(i.object({}).passthrough()),required:i.optional(i.array(i.string()))}).passthrough(),outputSchema:i.optional(i.object({type:i.literal("object"),properties:i.optional(i.object({}).passthrough()),required:i.optional(i.array(i.string()))}).passthrough()),annotations:i.optional(xc),_meta:i.optional(i.object({}).passthrough())}).merge(yt),Ca=Ft.extend({method:i.literal("tools/list")}),wc=Ut.extend({tools:i.array(Rc)}),en=He.extend({content:i.array(Xs).default([]),structuredContent:i.object({}).passthrough().optional(),isError:i.optional(i.boolean())}),Ef=en.or(He.extend({toolResult:i.unknown()})),$a=$e.extend({method:i.literal("tools/call"),params:Ve.extend({name:i.string(),arguments:i.optional(i.record(i.unknown()))})}),Tc=rr.extend({method:i.literal("notifications/tools/list_changed")}),Et=i.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Da=$e.extend({method:i.literal("logging/setLevel"),params:Ve.extend({level:Et})}),Oc=rr.extend({method:i.literal("notifications/message"),params:gt.extend({level:Et,logger:i.optional(i.string()),data:i.unknown()})}),Ic=i.object({name:i.string().optional()}).passthrough(),Ac=i.object({hints:i.optional(i.array(Ic)),costPriority:i.optional(i.number().min(0).max(1)),speedPriority:i.optional(i.number().min(0).max(1)),intelligencePriority:i.optional(i.number().min(0).max(1))}).passthrough(),Cc=i.object({role:i.enum(["user","assistant"]),content:i.union([Oa,Ia,Aa])}).passthrough(),$c=$e.extend({method:i.literal("sampling/createMessage"),params:Ve.extend({messages:i.array(Cc),systemPrompt:i.optional(i.string()),includeContext:i.optional(i.enum(["none","thisServer","allServers"])),temperature:i.optional(i.number()),maxTokens:i.number().int(),stopSequences:i.optional(i.array(i.string())),metadata:i.optional(i.object({}).passthrough()),modelPreferences:i.optional(Ac)})}),ka=He.extend({model:i.string(),stopReason:i.optional(i.enum(["endTurn","stopSequence","maxTokens"]).or(i.string())),role:i.enum(["user","assistant"]),content:i.discriminatedUnion("type",[Oa,Ia,Aa])}),Dc=i.object({type:i.literal("boolean"),title:i.optional(i.string()),description:i.optional(i.string()),default:i.optional(i.boolean())}).passthrough(),kc=i.object({type:i.literal("string"),title:i.optional(i.string()),description:i.optional(i.string()),minLength:i.optional(i.number()),maxLength:i.optional(i.number()),format:i.optional(i.enum(["email","uri","date","date-time"]))}).passthrough(),Nc=i.object({type:i.enum(["number","integer"]),title:i.optional(i.string()),description:i.optional(i.string()),minimum:i.optional(i.number()),maximum:i.optional(i.number())}).passthrough(),Lc=i.object({type:i.literal("string"),title:i.optional(i.string()),description:i.optional(i.string()),enum:i.array(i.string()),enumNames:i.optional(i.array(i.string()))}).passthrough(),Mc=i.union([Dc,kc,Nc,Lc]),jc=$e.extend({method:i.literal("elicitation/create"),params:Ve.extend({message:i.string(),requestedSchema:i.object({type:i.literal("object"),properties:i.record(i.string(),Mc),required:i.optional(i.array(i.string()))}).passthrough()})}),Na=He.extend({action:i.enum(["accept","decline","cancel"]),content:i.optional(i.record(i.string(),i.unknown()))}),Fc=i.object({type:i.literal("ref/resource"),uri:i.string()}).passthrough();var Uc=i.object({type:i.literal("ref/prompt"),name:i.string()}).passthrough(),qc=$e.extend({method:i.literal("completion/complete"),params:Ve.extend({ref:i.union([Uc,Fc]),argument:i.object({name:i.string(),value:i.string()}).passthrough(),context:i.optional(i.object({arguments:i.optional(i.record(i.string(),i.string()))}))})}),Vc=He.extend({completion:i.object({values:i.array(i.string()).max(100),total:i.optional(i.number().int()),hasMore:i.optional(i.boolean())}).passthrough()}),Hc=i.object({uri:i.string().startsWith("file://"),name:i.optional(i.string()),_meta:i.optional(i.object({}).passthrough())}).passthrough(),zc=$e.extend({method:i.literal("roots/list")}),La=He.extend({roots:i.array(Hc)}),Bc=rr.extend({method:i.literal("notifications/roots/list_changed")}),Sf=i.union([Mt,Ra,qc,Da,yc,vc,sc,oc,lc,dc,fc,$a,Ca]),Pf=i.union([Lt,jt,wa,Bc]),bf=i.union([Nt,ka,Na,La]),xf=i.union([Mt,$c,jc,zc]),Rf=i.union([Lt,jt,Oc,hc,uc,Tc,bc]),wf=i.union([Nt,rc,Vc,Pc,gc,nc,ic,cc,en,wc]),Ze=class extends Error{constructor(e,t,s){super(`MCP error ${e}: ${t}`),this.code=e,this.data=s,this.name="McpError"}};var Wc=6e4,qt=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Lt,t=>{let s=this._requestHandlerAbortControllers.get(t.params.requestId);s?.abort(t.params.reason)}),this.setNotificationHandler(jt,t=>{this._onprogress(t)}),this.setRequestHandler(Mt,t=>({}))}_setupTimeout(e,t,s,r,n=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:s,resetTimeoutOnProgress:n,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let s=Date.now()-t.startTime;if(t.maxTotalTimeout&&s>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Ze(Qe.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:s});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,s,r;this._transport=e;let n=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let l=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=f=>{l?.(f),this._onerror(f)};let o=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(f,d)=>{o?.(f,d),xa(f)||Ws(f)?this._onresponse(f):qs(f)?this._onrequest(f,d):Hs(f)?this._onnotification(f):this._onerror(new Error(`Unknown message type: ${JSON.stringify(f)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new Ze(Qe.ConnectionClosed,"Connection closed");for(let r of t.values())r(s)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let s=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var s,r;let n=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,l=this._transport;if(n===void 0){l?.send({jsonrpc:"2.0",id:e.id,error:{code:Qe.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let o=new AbortController;this._requestHandlerAbortControllers.set(e.id,o);let f={signal:o.signal,sessionId:l?.sessionId,_meta:(r=e.params)===null||r===void 0?void 0:r._meta,sendNotification:d=>this.notification(d,{relatedRequestId:e.id}),sendRequest:(d,h,m)=>this.request(d,h,{...m,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>n(e,f)).then(d=>{if(!o.signal.aborted)return l?.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var h;if(!o.signal.aborted)return l?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Qe.InternalError,message:(h=d.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...s}=e.params,r=Number(t),n=this._progressHandlers.get(r);if(!n){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let l=this._responseHandlers.get(r),o=this._timeoutInfo.get(r);if(o&&l&&o.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(f){l(f);return}n(s)}_onresponse(e){let t=Number(e.id),s=this._responseHandlers.get(t);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),xa(e))s(e);else{let r=new Ze(e.error.code,e.error.message,e.error.data);s(r)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,s){let{relatedRequestId:r,resumptionToken:n,onresumptiontoken:l}=s??{};return new Promise((o,f)=>{var d,h,m,E,c,y;if(!this._transport){f(new Error("Not connected"));return}((d=this._options)===null||d===void 0?void 0:d.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(h=s?.signal)===null||h===void 0||h.throwIfAborted();let _=this._requestMessageId++,v={...e,jsonrpc:"2.0",id:_};s?.onprogress&&(this._progressHandlers.set(_,s.onprogress),v.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:_}});let b=w=>{var I;this._responseHandlers.delete(_),this._progressHandlers.delete(_),this._cleanupTimeout(_),(I=this._transport)===null||I===void 0||I.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:_,reason:String(w)}},{relatedRequestId:r,resumptionToken:n,onresumptiontoken:l}).catch(A=>this._onerror(new Error(`Failed to send cancellation: ${A}`))),f(w)};this._responseHandlers.set(_,w=>{var I;if(!(!((I=s?.signal)===null||I===void 0)&&I.aborted)){if(w instanceof Error)return f(w);try{let A=t.parse(w.result);o(A)}catch(A){f(A)}}}),(E=s?.signal)===null||E===void 0||E.addEventListener("abort",()=>{var w;b((w=s?.signal)===null||w===void 0?void 0:w.reason)});let T=(c=s?.timeout)!==null&&c!==void 0?c:Wc,x=()=>b(new Ze(Qe.RequestTimeout,"Request timed out",{timeout:T}));this._setupTimeout(_,T,s?.maxTotalTimeout,x,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(v,{relatedRequestId:r,resumptionToken:n,onresumptiontoken:l}).catch(w=>{this._cleanupTimeout(_),f(w)})})}async notification(e,t){var s,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((r=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&r!==void 0?r:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var f;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let d={...e,jsonrpc:"2.0"};(f=this._transport)===null||f===void 0||f.send(d,t).catch(h=>this._onerror(h))});return}let o={...e,jsonrpc:"2.0"};await this._transport.send(o,t)}setRequestHandler(e,t){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(r,n)=>Promise.resolve(t(e.parse(r),n)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(t(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function rn(a,e){return Object.entries(e).reduce((t,[s,r])=>(r&&typeof r=="object"?t[s]=t[s]?{...t[s],...r}:r:t[s]=r,t),{...a})}var ni=ga(si(),1),oa=class extends qt{constructor(e,t){var s;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Et.options.map((r,n)=>[r,n])),this.isMessageIgnored=(r,n)=>{let l=this._loggingLevels.get(n);return l?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(l):!1},this._capabilities=(s=t?.capabilities)!==null&&s!==void 0?s:{},this._instructions=t?.instructions,this.setRequestHandler(Ra,r=>this._oninitialize(r)),this.setNotificationHandler(wa,()=>{var r;return(r=this.oninitialized)===null||r===void 0?void 0:r.call(this)}),this._capabilities.logging&&this.setRequestHandler(Da,async(r,n)=>{var l;let o=n.sessionId||((l=n.requestInfo)===null||l===void 0?void 0:l.headers["mcp-session-id"])||void 0,{level:f}=r.params,d=Et.safeParse(f);return d.success&&this._loggingLevels.set(o,d.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=rn(this._capabilities,e)}assertCapabilityForMethod(e){var t,s,r;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Ms.includes(t)?t:ba,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Nt)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},ka,t)}async elicitInput(e,t){let s=await this.request({method:"elicitation/create",params:e},Na,t);if(s.action==="accept"&&s.content)try{let r=new ni.default,n=r.compile(e.requestedSchema);if(!n(s.content))throw new Ze(Qe.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(n.errors)}`)}catch(r){throw r instanceof Ze?r:new Ze(Qe.InternalError,`Error validating elicitation response: ${r}`)}return s}async listRoots(e,t){return this.request({method:"roots/list",params:e},La,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var is=ga(require("node:process"),1);var ia=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),Rd(t)}clear(){this._buffer=void 0}};function Rd(a){return Qs.parse(JSON.parse(a))}function oi(a){return JSON.stringify(a)+`
`}var la=class{constructor(e=is.default.stdin,t=is.default.stdout){this._stdin=e,this._stdout=t,this._readBuffer=new ia,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var r;(r=this.onerror)===null||r===void 0||r.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(t=this.onerror)===null||t===void 0||t.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(t=>{let s=oi(e);this._stdout.write(s)?t():this._stdout.once("drain",t)})}};var da=ga(require("path"),1),li=require("os");var ls={DEFAULT:3e5,HEALTH_CHECK:3e4,WORKER_STARTUP_WAIT:1e3,WORKER_STARTUP_RETRIES:300,PRE_RESTART_SETTLE_DELAY:2e3,WINDOWS_MULTIPLIER:1.5};function ii(a){return process.platform==="win32"?Math.round(a*ls.WINDOWS_MULTIPLIER):a}var Nh=da.default.join((0,li.homedir)(),".claude","plugins","marketplaces","thedotmack"),Lh=ii(ls.HEALTH_CHECK),ca=null,ua=null;function ci(){if(ca!==null)return ca;let a=da.default.join(Be.get("CLAUDE_MEM_DATA_DIR"),"settings.json"),e=Be.loadFromFile(a);return ca=parseInt(e.CLAUDE_MEM_WORKER_PORT,10),ca}function ui(){if(ua!==null)return ua;let a=da.default.join(Be.get("CLAUDE_MEM_DATA_DIR"),"settings.json");return ua=Be.loadFromFile(a).CLAUDE_MEM_WORKER_HOST,ua}console.log=(...a)=>{pe.error("CONSOLE","Intercepted console output (MCP protocol protection)",void 0,{args:a})};var wd=ci(),Td=ui(),Pt=`http://${Td}:${wd}`,di={search:"/api/search",timeline:"/api/timeline"};async function fi(a,e){pe.debug("SYSTEM","\u2192 Worker API",void 0,{endpoint:a,params:e});try{let t=new URLSearchParams;for(let[l,o]of Object.entries(e))o!=null&&t.append(l,String(o));let s=`${Pt}${a}?${t}`,r=await fetch(s);if(!r.ok){let l=await r.text();throw new Error(`Worker API error (${r.status}): ${l}`)}let n=await r.json();return pe.debug("SYSTEM","\u2190 Worker API success",void 0,{endpoint:a}),n}catch(t){return pe.error("SYSTEM","\u2190 Worker API error",{endpoint:a},t),{content:[{type:"text",text:`Error calling Worker API: ${t instanceof Error?t.message:String(t)}`}],isError:!0}}}async function Od(a,e){pe.debug("HTTP","Worker API request (POST)",void 0,{endpoint:a});try{let t=`${Pt}${a}`,s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let n=await s.text();throw new Error(`Worker API error (${s.status}): ${n}`)}let r=await s.json();return pe.debug("HTTP","Worker API success (POST)",void 0,{endpoint:a}),{content:[{type:"text",text:JSON.stringify(r,null,2)}]}}catch(t){return pe.error("HTTP","Worker API error (POST)",{endpoint:a},t),{content:[{type:"text",text:`Error calling Worker API: ${t instanceof Error?t.message:String(t)}`}],isError:!0}}}async function Id(){try{return(await fetch(`${Pt}/api/health`)).ok}catch(a){return pe.debug("SYSTEM","Worker health check failed",{},a),!1}}var hi=[{name:"__IMPORTANT",description:`3-LAYER WORKFLOW (ALWAYS FOLLOW):
1. search(query) \u2192 Get index with IDs (~50-100 tokens/result)
2. timeline(anchor=ID) \u2192 Get context around interesting results
3. get_observations([IDs]) \u2192 Fetch full details ONLY for filtered IDs
NEVER fetch full details without filtering first. 10x token savings.`,inputSchema:{type:"object",properties:{}},handler:async()=>({content:[{type:"text",text:`# Memory Search Workflow

**3-Layer Pattern (ALWAYS follow this):**

1. **Search** - Get index of results with IDs
   \`search(query="...", limit=20, project="...")\`
   Returns: Table with IDs, titles, dates (~50-100 tokens/result)

2. **Timeline** - Get context around interesting results
   \`timeline(anchor=<ID>, depth_before=3, depth_after=3)\`
   Returns: Chronological context showing what was happening

3. **Fetch** - Get full details ONLY for relevant IDs
   \`get_observations(ids=[...])\`  # ALWAYS batch for 2+ items
   Returns: Complete details (~500-1000 tokens/result)

**Why:** 10x token savings. Never fetch full details without filtering first.`}]})},{name:"search",description:"Step 1: Search memory. Returns index with IDs. Params: query, limit, project, type, obs_type, dateStart, dateEnd, offset, orderBy",inputSchema:{type:"object",properties:{},additionalProperties:!0},handler:async a=>{let e=di.search;return await fi(e,a)}},{name:"timeline",description:"Step 2: Get context around results. Params: anchor (observation ID) OR query (finds anchor automatically), depth_before, depth_after, project",inputSchema:{type:"object",properties:{},additionalProperties:!0},handler:async a=>{let e=di.timeline;return await fi(e,a)}},{name:"get_observations",description:"Step 3: Fetch full details for filtered IDs. Params: ids (array of observation IDs, required), orderBy, limit, project",inputSchema:{type:"object",properties:{ids:{type:"array",items:{type:"number"},description:"Array of observation IDs to fetch (required)"}},required:["ids"],additionalProperties:!0},handler:async a=>await Od("/api/observations/batch",a)}],cs=new oa({name:"mcp-search-server",version:"1.0.0"},{capabilities:{tools:{}}});cs.setRequestHandler(Ca,async()=>({tools:hi.map(a=>({name:a.name,description:a.description,inputSchema:a.inputSchema}))}));cs.setRequestHandler($a,async a=>{let e=hi.find(t=>t.name===a.params.name);if(!e)throw new Error(`Unknown tool: ${a.params.name}`);try{return await e.handler(a.params.arguments||{})}catch(t){return pe.error("SYSTEM","Tool execution failed",{tool:a.params.name},t),{content:[{type:"text",text:`Tool execution failed: ${t instanceof Error?t.message:String(t)}`}],isError:!0}}});async function pi(){pe.info("SYSTEM","MCP server shutting down"),process.exit(0)}process.on("SIGTERM",pi);process.on("SIGINT",pi);async function Ad(){let a=new la;await cs.connect(a),pe.info("SYSTEM","Claude-mem search server started"),setTimeout(async()=>{await Id()?pe.info("SYSTEM","Worker available",void 0,{workerUrl:Pt}):(pe.warn("SYSTEM","Worker not available",void 0,{workerUrl:Pt}),pe.warn("SYSTEM","Tools will fail until Worker is started"),pe.warn("SYSTEM","Start Worker with: npm run worker:restart"))},0)}Ad().catch(a=>{pe.error("SYSTEM","Fatal error",void 0,a),process.exit(1)});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
